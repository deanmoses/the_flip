{% extends "wiki/base.html" %}
{% load core_extras %}
{% load static %}
{% load wiki_extras %}
{% block title %}{{ page.title }} · Docs · {{ block.super }}{% endblock %}
{% block breadcrumbs %}{{ block.super }}<span>{{ page.title }}</span>{% endblock %}
{% block main %}
  <article>
    <div class="card card--padded" data-text-card>
      <div class="markdown-content" data-text-display>
        {% if page.content %}
          {% render_wiki_content page %}
        {% else %}
          <p class="text-muted">This page has no content yet.</p>
        {% endif %}
      </div>
      <textarea class="hidden" data-text-textarea>{{ page.content|storage_to_authoring }}</textarea>
    </div>
    <footer class="space-above-md">
      <div class="text-muted text-sm">
        Last updated {{ page.updated_at|smart_date }}
        {% if page.updated_by %}by {{ page.updated_by|display_name_with_username }}{% endif %}
      </div>
      {% if other_tags %}
        <div class="text-sm text-muted">
          {% icon "tags" class="space-right-sm" %}
          This page also appears in:
          {% for tag in other_tags %}
            <a href="{% url 'wiki-page-detail' tag %}">{{ tag }}</a>
            {% if not forloop.last %},{% endif %}
          {% endfor %}
        </div>
      {% endif %}
      <div class="form-actions space-above-sm">
        <a href="{% url 'wiki-page-delete' detail_path %}"
           class="btn btn--secondary">
          {% icon "trash" class="meta" %}
          Delete
        </a>
        <a href="{% url 'wiki-page-edit' detail_path %}"
           class="btn btn--primary">
          {% icon "pen" class="meta" %}
          Edit
        </a>
      </div>
    </footer>
  </article>
{% endblock %}
{% block extra_scripts %}
  <script src="{% static 'core/save_status.js' %}" defer></script>
  <script src="{% static 'core/task_list_enter.js' %}" defer></script>
  <script src="{% static 'core/checkbox_toggle.js' %}" defer></script>
{% endblock %}
