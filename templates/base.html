{% load static core_extras %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
      {% block title %}The Flip{% endblock %}
    </title>
    <link rel="icon"
          href="{% static 'core/favicon.svg' %}"
          type="image/svg+xml">
    <link rel="icon"
          href="{% static 'core/favicon.png' %}"
          sizes="16x16"
          type="image/png">
    <link rel="apple-touch-icon"
          href="{% static 'core/images/logo_blue.png' %}">
    <link rel="stylesheet" href="{% static 'core/styles.css' %}">
  </head>
  <body>
    <header>
      <h1>
        <a href="{% url 'home' %}">
          <img src="{% static 'core/images/logo_white.svg' %}"
               alt="The Flip"
               class="header-logo">
        </a>
      </h1>
      <nav>
        <a href="{% url 'maintainer-machine-list' %}">Machines</a>
        <a href="{% url 'problem-report-list' %}">Problem Reports</a>
        <a href="{% url 'log-list' %}">Logs</a>
        {% if user.is_authenticated %}
          <div class="user-menu">
            <button type="button"
                    class="user-menu__avatar"
                    aria-haspopup="true"
                    aria-expanded="false">
              {% if user.first_name and user.last_name %}
                {{ user.first_name|make_list|first }}{{ user.last_name|make_list|first }}
              {% elif user.first_name %}
                {{ user.first_name|make_list|first }}
              {% else %}
                {{ user.username|make_list|first }}
              {% endif %}
            </button>
            <div class="user-menu__dropdown">
              <a href="{% url 'profile' %}" class="user-menu__item">Profile</a>
              <form method="post" action="{% url 'logout' %}">
                {% csrf_token %}
                <button type="submit" class="user-menu__item">Logout</button>
              </form>
            </div>
          </div>
        {% else %}
          <span>ãƒ»</span> <a href="{% url 'login' %}">Login</a>
        {% endif %}
      </nav>
    </header>
    <main>
      {% if messages %}
        <div class="messages" role="alert" aria-live="polite">
          {% for message in messages %}<div class="message message--{{ message.tags }}">{{ message }}</div>{% endfor %}
        </div>
      {% endif %}
      {% block content %}{% endblock %}
    </main>
    <script src="{% static 'core/clickable_cards.js' %}" defer></script>
    <script src="{% static 'core/timezone.js' %}" defer></script>
    {% block extra_scripts %}
    {% endblock %}
  </body>
</html>
