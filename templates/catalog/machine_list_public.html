{% extends "base_public_minimal.html" %}
{% block title %}Machines · {{ block.super }}{% endblock %}
{% block content %}
  <h2>Machines</h2>
  {% if machines %}
    <ul class="flip-card-list">
      {% for machine in machines %}
        <li class="js-clickable-card"
            data-url="{% url 'public-machine-detail' machine.slug %}"
            tabindex="0"
            role="button"
            aria-label="View {{ machine.name }}">
          <article class="flip-card flip-card--clickable">
            <div class="flip-card__top">
              <div class="flip-card__top-left">
                <span class="flip-card__title">
                  {{ machine.name }}
                  <span class="text-muted">・{{ machine.model.year }} {{ machine.model.manufacturer }}</span>
                </span>
              </div>
              <div class="flip-card__top-right">
                <span class="badge badge-status badge-{{ machine.operational_status }}">
                  {{ machine.get_operational_status_display }}
                </span>
              </div>
            </div>
            <div class="flip-card__bottom">
              <div class="flip-card__bottom-left"></div>
              <div class="flip-card__bottom-right text-muted">Location: {{ machine.location.name|default:"—" }}</div>
            </div>
          </article>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No machines yet.</p>
  {% endif %}
{% endblock %}
