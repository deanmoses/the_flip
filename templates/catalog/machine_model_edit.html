{% extends "base.html" %}
{% load core_extras %}
{% block title %}Edit Model: {{ object.name }} · {{ block.super }}{% endblock %}
{% block content %}
  <nav class="page-header">
    <div class="page-header__left breadcrumb">
      <a href="{% url 'maintainer-machine-list' %}">Machines</a>
      <span>›</span>
      {% if machine_instance %}
        <a href="{% url 'maintainer-machine-detail' machine_instance.slug %}">{{ machine_instance.display_name }}</a>
        <span>›</span>
        <a href="{% url 'machine-edit' machine_instance.slug %}">Edit</a>
        <span>›</span>
      {% endif %}
      <strong>Model</strong>
    </div>
  </nav>
  <h2>Edit Model: {{ object.name }}</h2>
  <form method="post" class="form-container">
    {% csrf_token %}
    {{ form.non_field_errors }}
    {% for fieldset_title, field_names in form.fieldsets %}
      <fieldset class="form-section">
        <legend>{{ fieldset_title }}</legend>
        {% for field_name in field_names %}
          {% with field=form|getfield:field_name %}
            <div class="form-field">
              {{ field.label_tag }}
              {{ field }}
              {% if field.help_text %}<small class="help-text">{{ field.help_text }}</small>{% endif %}
              {% for error in field.errors %}<div class="field-error">{{ error }}</div>{% endfor %}
            </div>
          {% endwith %}
        {% endfor %}
      </fieldset>
    {% endfor %}
    <div class="form-actions">
      <a class="btn btn-secondary" href="{% url 'maintainer-machine-list' %}">Cancel</a>
      <button type="submit" class="btn btn-primary">Save Changes</button>
    </div>
  </form>
{% endblock %}
