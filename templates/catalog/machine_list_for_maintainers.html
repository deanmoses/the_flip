{% extends "layouts/two_column.html" %}
{% load static core_extras %}
{% block title %}Machines Â· {{ block.super }}{% endblock %}
{% block mobile_actions %}
  {% if user.is_superuser %}
    <a href="{% url 'machine-quick-create' %}" class="btn btn--secondary">
      {% icon "plus" class="meta" %}
      New Machine
    </a>
  {% endif %}
{% endblock %}
{% block sidebar %}
  {% sidebar_section label="Machines" %}
  {% stat_grid stats=stats %}
{% endsidebar_section %}
{% sidebar_section %}
{% if user.is_superuser %}
  <a href="{% url 'machine-quick-create' %}"
     class="btn btn--secondary btn--full">
    {% icon "plus" class="meta" %}
    New Machine
  </a>
{% endif %}
{% endsidebar_section %}
{% endblock %}
{% block main %}
  <!-- SEARCH BAR -->
  <div class="filter-bar">
    <div class="filter-bar__search filter-bar__search--full">
      <input type="search"
             id="machine-search"
             placeholder="Search machines..."
             class="filter-bar__search-input">
      {% icon "magnifying-glass" class="filter-bar__search-icon" %}
    </div>
  </div>
  <!-- MACHINE LIST -->
  {% if machines %}
    <div class="machine-list" id="machine-list">
      {% for machine in machines %}
        {% include "catalog/partials/machine_list_card.html" with machine=machine %}
      {% endfor %}
    </div>
  {% else %}
    <p class="text-muted">No machines yet.</p>
  {% endif %}
{% endblock %}
{% block extra_scripts %}
  <script src="{% static 'core/machine_filter.js' %}" defer></script>
{% endblock %}
