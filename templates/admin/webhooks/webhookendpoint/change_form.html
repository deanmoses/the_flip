{% extends "admin/change_form.html" %}
{% load i18n admin_urls %}
{% block after_field_sets %}
  {{ block.super }}
  {% if original %}
    <fieldset class="module aligned">
      <h2>Send Test Message</h2>
      <div class="description">Send a test message to this webhook endpoint to verify it's working correctly.</div>
      <div style="padding: 10px;">
        {% for event_code, event_name in event_choices %}
          <div style="margin-bottom: 8px;">
            <a href="{% url 'admin:webhooks_webhookendpoint_test' original.pk event_code %}"
               class="button"
               style="margin-right: 10px">Test: {{ event_name }}</a>
            <a href="{% url 'admin:webhooks_webhookendpoint_preview' original.pk event_code %}"
               class="button"
               target="_blank"
               rel="noopener noreferrer"
               style="margin-right: 10px">Preview JSON: {{ event_name }}</a>
          </div>
        {% endfor %}
      </div>
    </fieldset>
  {% endif %}
{% endblock %}
