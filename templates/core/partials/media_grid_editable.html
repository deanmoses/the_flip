{# Editable media grid for detail/edit pages with delete buttons #}
{# Usage: {% include "core/partials/media_grid_editable.html" with media_items=entry.media.all %} #}
<div id="media-container" class="media-grid">
  {% if media_items %}
    {% for media in media_items %}
      <div class="media-grid__item" data-media-id="{{ media.id }}">
        {% if media.media_type == 'video' %}
          {% if media.transcode_status == 'ready' and media.transcoded_file %}
            <video controls poster="{{ media.poster_file.url }}">
              <source src="{{ media.transcoded_file.url }}" type="video/mp4">
              Your browser doesn't support video playback.
            </video>
          {% elif media.transcode_status == 'processing' or media.transcode_status == 'pending' %}
            <div class="media-grid__status">Processing video...</div>
          {% else %}
            <div class="media-grid__status media-grid__status--error">Video processing failed.</div>
          {% endif %}
        {% else %}
          <a href="{{ media.file.url }}" target="_blank">
            {% if media.thumbnail_file %}
              <img src="{{ media.thumbnail_file.url }}" alt="Photo">
            {% else %}
              <img src="{{ media.file.url }}" alt="Photo">
            {% endif %}
          </a>
        {% endif %}
        <button type="button"
                class="media-grid__delete"
                data-media-id="{{ media.id }}"
                aria-label="Delete media">&times;</button>
      </div>
    {% endfor %}
  {% else %}
    <p class="text-muted" id="no-media-message">No media.</p>
  {% endif %}
</div>
