{% load core_extras %}
{# Editable text card with view/edit modes and markdown rendering #}
{# Usage: {% include "core/partials/text_card_editable.html" with content=entry.text %} #}
{# Requires: Include text_edit.js in page scripts #}
<div class="card card--padded" data-text-card>
  <div class="card__header">
    <div class="card__title">Description</div>
    <div class="card__actions">
      <button type="button" class="btn btn--secondary btn--sm" data-text-edit-btn>Edit</button>
      <div class="hidden" data-text-edit-actions>
        <button type="button" class="btn btn--primary btn--sm" data-text-save-btn>Save</button>
        <button type="button" class="btn btn--secondary btn--sm" data-text-cancel-btn>Cancel</button>
      </div>
      <span class="status-indicator" data-text-status></span>
    </div>
  </div>
  <div data-text-view-mode>
    <div class="markdown-content" data-text-display>
      {% if content %}
        {{ content|render_markdown }}
      {% else %}
        <p class="text-muted">No description provided.</p>
      {% endif %}
    </div>
  </div>
  <div class="hidden" data-text-edit-mode>
    <textarea class="form-input form-textarea"
              data-text-textarea
              data-link-autocomplete
              data-link-api-url="{% url 'api-link-targets' %}"
              data-markdown-shortcuts>{{ content|storage_to_authoring }}</textarea>
  </div>
</div>
