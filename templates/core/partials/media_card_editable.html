{# Editable media card with upload button, grid, and file input #}
{# Usage: {% include "core/partials/media_card_editable.html" with media_items=entry.media.all alt="Log entry photo" model_name="LogEntryMedia" %} #}
{# Requires: Include media_grid.js and video_transcode_poll.js in page scripts #}
{% load ui_tags video_tags %}
<div class="card card--padded space-above-lg"
     data-media-card
     data-alt-text="{{ alt|default:'Photo' }}"
     data-model-name="{{ model_name|default:'LogEntryMedia' }}">
  <div class="card__header">
    <div class="card__title">Media</div>
    <div class="card__actions">
      <button type="button"
              class="btn btn--secondary btn--sm"
              data-media-upload-btn>Upload</button>
    </div>
  </div>
  <div class="media-grid" data-media-container>
    {% if media_items %}
      {% for media in media_items %}
        <div class="media-grid__item" data-media-id="{{ media.id }}">
          {% if media.media_type == media.MediaType.VIDEO %}
            {% video_player media=media model_name=model_name|default:"LogEntryMedia" %}
          {% else %}
            <a href="{{ media.file.url }}" target="_blank">
              {% if media.thumbnail_file %}
                <img src="{{ media.thumbnail_file.url }}" alt="{{ alt|default:'Photo' }}">
              {% else %}
                <img src="{{ media.file.url }}" alt="{{ alt|default:'Photo' }}">
              {% endif %}
            </a>
          {% endif %}
          <button type="button"
                  class="media-grid__delete"
                  data-media-id="{{ media.id }}"
                  aria-label="Delete media">Ã—</button>
        </div>
      {% endfor %}
    {% else %}
      <p class="text-muted" data-no-media-message>No media.</p>
    {% endif %}
  </div>
  <input type="file"
         accept="{% media_accept %}"
         multiple
         class="hidden"
         data-media-file-input>
</div>
