{% load core_extras %}
{% timeline_entry icon="box-open" variant="log" %}
<div class="card card--log timeline__card">
  <a href="{% url 'part-request-detail' entry.part_request.pk %}"
     class="timeline__card-link">
    <div class="timeline__header">
      <div class="flex items-center stack-tight flex-wrap">
        <span class="timeline__title timeline__title--log">
          Parts Request <i class="fa-solid fa-box-open"></i> #{{ entry.part_request.pk }}
          {% if entry.new_status %}
            status changed to
          {% else %}
            updated
          {% endif %}
        </span>
        {% if entry.new_status %}<span class="pill pill--neutral">{{ entry.get_new_status_display }}</span>{% endif %}
      </div>
      <span class="timeline__meta">{{ entry.created_at|smart_date }} Â· {{ entry.posted_by.display_name }}</span>
    </div>
    {% if entry.text %}
      <div class="timeline__body markdown-content markdown-content--compact">
        {{ entry.text|truncatechars:200|render_markdown }}
      </div>
    {% endif %}
  </a>
</div>
{% endtimeline_entry %}
