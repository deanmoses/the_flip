{% load ui_tags %}
{% load list_tags %}
{% load markdown_tags %}
{% load parts_tags %}
{% timeline_entry icon="comment" variant="log" %}
<article class="card card--log timeline__card">
  <a href="{% url 'part-request-update-detail' update.pk %}"
     class="timeline__card-link">
    <div class="timeline__header">
      <div class="flex items-center stack-tight">
        <span class="timeline__title timeline__title--log">Update
          {% if update.new_status %}: status changed to{% endif %}
        </span>
        {% if update.new_status %}<span class="pill pill--neutral">{{ update.get_new_status_display }}</span>{% endif %}
      </div>
      <span class="timeline__meta">{% part_update_meta update %}</span>
    </div>
  </a>
  <div class="timeline__body markdown-content markdown-content--compact">{{ update.text|render_markdown }}</div>
  {% if update.media.all %}
    {% url 'part-request-update-detail' update.pk as update_url %}
    {% include "core/partials/media_grid_readonly.html" with media_items=update.media.all detail_url=update_url model_name="PartRequestUpdateMedia" %}
  {% endif %}
</article>
{% endtimeline_entry %}
