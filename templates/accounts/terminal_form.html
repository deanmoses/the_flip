{% extends "layouts/two_column.html" %}
{% load core_extras %}
{% block title %}
  {% if is_create %}
    Add Terminal
  {% else %}
    Edit Terminal {{ terminal.user.username }}
  {% endif %}
  Â· {{ block.super }}
{% endblock %}
{% block breadcrumbs %}
  <nav class="breadcrumbs breadcrumbs--responsive">
    <a href="{% url 'terminal-list' %}" class="breadcrumbs__link">Shared Terminal Accounts</a>
    <span>/</span>
    <span class="breadcrumbs__current">
      {% if is_create %}
        New Account
      {% else %}
        {{ terminal.user|display_name_with_username }}
      {% endif %}
    </span>
  </nav>
{% endblock %}
{% block mobile_actions %}
  {% if not is_create %}
    {% if terminal.user.is_active %}
      <form method="post" action="{% url 'terminal-deactivate' terminal.pk %}">
        {% csrf_token %}
        <button type="submit" class="btn btn--danger btn--full">
          <i class="fa-solid fa-ban meta"></i>
          Deactivate
        </button>
      </form>
    {% else %}
      <form method="post" action="{% url 'terminal-reactivate' terminal.pk %}">
        {% csrf_token %}
        <button type="submit" class="btn btn--success btn--full">
          <i class="fa-solid fa-rotate-left meta"></i>
          Reactivate
        </button>
      </form>
    {% endif %}
  {% endif %}
{% endblock %}
{% block sidebar %}
  {% sidebar %}
  {% sidebar_section label="Shared Terminal" %}
  {% if not is_create %}
    <div class="sidebar__title">{{ terminal.user|display_name_with_username }}</div>
  {% else %}
    <div class="sidebar__title text-muted">New terminal</div>
  {% endif %}
{% endsidebar_section %}
{% if not is_create %}
  {% sidebar_section %}
  {% if terminal.user.is_active %}
    <form method="post" action="{% url 'terminal-deactivate' terminal.pk %}">
      {% csrf_token %}
      <button type="submit" class="btn btn--danger btn--full">
        <i class="fa-solid fa-ban meta"></i>
        Deactivate
      </button>
    </form>
  {% else %}
    <form method="post" action="{% url 'terminal-reactivate' terminal.pk %}">
      {% csrf_token %}
      <button type="submit" class="btn btn--success btn--full">
        <i class="fa-solid fa-rotate-left meta"></i>
        Reactivate
      </button>
    </form>
  {% endif %}
{% endsidebar_section %}
{% endif %}
{% endsidebar %}
{% endblock %}
{% block main %}
  <div class="card card--padded">
    <form method="post" autocomplete="off" class="form-main">
      {% csrf_token %}
      {% form_non_field_errors form %}
      {% for field in form %}
        <div class="form-field">
          {{ field.label_tag }}
          {{ field }}
          {% if field.help_text %}<small class="help-text">{{ field.help_text }}</small>{% endif %}
          {% for error in field.errors %}<p class="text-problem body-small">{{ error }}</p>{% endfor %}
        </div>
      {% endfor %}
      <div class="form-actions">
        <a href="{% url 'terminal-list' %}" class="btn btn--secondary">
          <i class="fa-solid fa-circle-xmark meta"></i>
          Cancel
        </a>
        <button type="submit" class="btn btn--log">
          <i class="fa-solid fa-floppy-disk meta"></i>
          {% if is_create %}
            Create Terminal
          {% else %}
            Save Changes
          {% endif %}
        </button>
      </div>
    </form>
  </div>
{% endblock %}
