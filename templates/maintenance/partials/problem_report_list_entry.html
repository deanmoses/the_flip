{% load core_extras %}
<li>
  <article class="flip-card flip-card--clickable js-clickable-card"
           data-url="{% url 'problem-report-detail' report.pk %}"
           tabindex="0"
           role="button"
           aria-label="View problem report for {{ report.machine.display_name }}">
    <div class="flip-card__top">
      <div class="flip-card__top-left">
        <span class="flip-card__title">{{ report.machine.display_name }}</span>
      </div>
      <div class="flip-card__top-right log-entry-meta">
        {{ report|problem_report_meta }}
        <span class="badge badge-status badge-{{ report.status }}">{{ report.get_status_display }}</span>
      </div>
    </div>
    <div class="flip-card__main">
      {% if report.problem_type != report.PROBLEM_OTHER %}
        <p>
          <strong>{{ report.get_problem_type_display }}</strong>
        </p>
      {% endif %}
      {% if report.description %}
        <div class="markdown-content markdown-content--compact">{{ report.description|render_markdown }}</div>
      {% elif report.problem_type == report.PROBLEM_OTHER %}
        <p class="text-muted">No description provided.</p>
      {% endif %}
    </div>
    {% if report.prefetched_log_entries %}
      {% with latest_log=report.prefetched_log_entries.0 %}
        <div class="flip-card__bottom">
          <div class="flip-card__bottom-left"></div>
          <div class="flip-card__bottom-right text-muted flip-card__snippet">
            <strong>Latest log:</strong> {{ latest_log.text }}
          </div>
        </div>
      {% endwith %}
    {% endif %}
  </article>
</li>
