{% load core_extras %}
{% timeline_entry icon="screwdriver-wrench" variant="log" %}
<div class="card card--log timeline__card">
  <a href="{% url 'log-detail' entry.pk %}" class="timeline__card-link">
    <div class="timeline__header">
      <span class="timeline__title timeline__title--log">{{ entry.machine.name }}</span>
      <span class="timeline__meta">{{ entry|log_entry_meta }}</span>
    </div>
  </a>
  <div class="timeline__body {% if entry.problem_report or entry.media.all %}space-below-sm{% endif %} markdown-content markdown-content--compact">
    {{ entry.text|render_markdown }}
  </div>
  {% url 'log-detail' entry.pk as entry_url %}
  {% include "core/partials/media_grid_readonly.html" with media_items=entry.media.all detail_url=entry_url model_name="LogEntryMedia" %}
  {% if entry.problem_report %}
    <a href="{% url 'problem-report-detail' entry.problem_report.pk %}"
       class="timeline__snippet-link">
      <span aria-hidden="true">â†³</span> {% pill label=entry.problem_report.get_status_display variant=entry.problem_report.status %}
      <span class="snippet-label text-problem">{% icon "bug" class="space-right-xs" %}Problem:</span>
      <span class="snippet-text">{{ entry.problem_report|problem_report_summary }}</span>
    </a>
  {% endif %}
</div>
{% endtimeline_entry %}
