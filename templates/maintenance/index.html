{% extends "base.html" %}
{% block title %}Maintenance · {{ block.super }}{% endblock %}
{% block content %}
  <h2>Maintenance Overview</h2>

  <section>
    <h3>Open Problem Reports</h3>
    {% if open_reports %}
      <ul>
        {% for report in open_reports %}
          <li>
            <strong>{{ report.machine.display_name }}</strong> — {{ report.description|default:"No description" }}
            <span>({{ report.created_at|date:"M j, Y" }})</span>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No open reports.</p>
    {% endif %}
  </section>

  <section>
    <h3>Recent Maintenance Log Entries</h3>
    {% if recent_logs %}
      <ul>
        {% for entry in recent_logs %}
          <li>
            <strong>{{ entry.machine.display_name }}</strong> — {{ entry.text|truncatechars:100 }}
            <div>
              {% if entry.maintainers.all %}
                Maintainers:
                {{ entry.maintainers.all|join:", " }}
              {% elif entry.maintainer_names %}
                Maintainers: {{ entry.maintainer_names }}
              {% endif %}
            </div>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No log entries yet.</p>
    {% endif %}
  </section>
{% endblock %}
