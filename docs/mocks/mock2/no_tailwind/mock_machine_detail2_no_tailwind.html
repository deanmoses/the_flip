<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Flip - Machine Detail (No Tailwind)</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap"
          rel="stylesheet">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="mock2_reset.css">
    <link rel="stylesheet" href="mock2_styles.css">
  </head>
  <body>
    <!-- === PERSISTENT SITE HEADER === -->
    <header class="app-header">
      <a href="#">
        <img src="../../../../the_flip/static/core/images/logo_blue.svg"
             alt="The Flip"
             class="brand-logo">
      </a>
      <!-- Desktop nav (md+) -->
      <nav class="nav nav--desktop">
        <a href="#" class="nav-link nav-link--active">Machines</a>
        <a href="#" class="nav-link">Problem Reports</a>
        <a href="#" class="nav-link">Logs</a>
        <!-- Admin Dropdown (superadmin only) -->
        <div class="dropdown">
          <button id="admin-dropdown-toggle-desktop"
                  class="nav-link dropdown__toggle"
                  onclick="toggleAdminMenu('desktop')">
            Admin <i class="fa-solid fa-caret-down text-xs"></i>
          </button>
          <div id="admin-menu-desktop"
               class="dropdown__menu dropdown__menu--left hidden">
            <a href="#" class="dropdown__item"><i class="fa-solid fa-users-gear mr-2"></i> Shared Accounts</a>
            <a href="#" class="dropdown__item"><i class="fa-solid fa-envelope mr-2"></i> Invite User</a>
            <a href="#" class="dropdown__item"><i class="fa-solid fa-toolbox mr-2"></i> Django Admin</a>
          </div>
        </div>
      </nav>
      <!-- Mobile nav (icon-only) -->
      <nav class="nav nav--icons nav--mobile">
        <a href="#" class="nav-icon nav-icon--active"><i class="fa-solid fa-list"></i></a>
        <a href="#" class="nav-icon"><i class="fa-solid fa-triangle-exclamation"></i></a>
        <a href="#" class="nav-icon"><i class="fa-solid fa-screwdriver-wrench"></i></a>
        <!-- Admin Dropdown (superadmin only) -->
        <div class="dropdown">
          <button id="admin-dropdown-toggle-mobile"
                  class="nav-icon"
                  onclick="toggleAdminMenu('mobile')">
            <i class="fa-solid fa-users"></i>
          </button>
          <div id="admin-menu-mobile" class="dropdown__menu hidden">
            <a href="#" class="dropdown__item"><i class="fa-solid fa-users-gear mr-2"></i> Shared Accounts</a>
            <a href="#" class="dropdown__item"><i class="fa-solid fa-envelope mr-2"></i> Invite User</a>
            <a href="#" class="dropdown__item"><i class="fa-solid fa-toolbox mr-2"></i> Django Admin</a>
          </div>
        </div>
      </nav>
      <!-- User dropdown -->
      <div class="dropdown">
        <div id="account-dropdown-toggle"
             class="avatar"
             onclick="toggleAccountMenu()">PW</div>
        <div id="account-menu" class="dropdown__menu hidden" style="width: 12rem;">
          <p class="text-sm text-muted mb-2">PinballWizard99</p>
          <a href="#" class="dropdown__item"><i class="fa-solid fa-gear mr-2"></i> Account</a>
          <a href="#" class="dropdown__item dropdown__item--danger"><i class="fa-solid fa-right-from-bracket mr-2"></i> Logout</a>
        </div>
      </div>
    </header>
    <!-- === MAIN CONTENT === -->
    <main class="main-content">
      <!-- BREADCRUMBS -->
      <nav class="breadcrumbs breadcrumbs--responsive">
        <a href="#" class="breadcrumbs__link">Machines</a>
        <span>/</span>
        <span class="breadcrumbs__current">The Addams Family</span>
      </nav>
      <!-- TWO COLUMN LAYOUT: Main Content + Sidebar -->
      <div class="two-column">
        <!-- MOBILE ACTION BUTTONS (visible on mobile only) -->
        <div class="mobile-actions">
          <a href="#" class="btn btn--secondary">
            <i class="fa-solid fa-gear text-xs"></i>
            Edit
          </a>
          <a href="#" class="btn btn--report">
            <i class="fa-solid fa-bug text-xs"></i>
            Report
          </a>
          <a href="#" class="btn btn--log">
            <i class="fa-solid fa-screwdriver-wrench text-xs"></i>
            Log
          </a>
        </div>
        <!-- SIDEBAR (desktop only) -->
        <aside class="two-column__sidebar">
          <div class="card sidebar--sticky" style="padding: var(--space-4);">
            <!-- MACHINE INFO -->
            <div class="sidebar__section">
              <div class="sidebar__label">Machine</div>
              <div class="sidebar__title">The Addams Family</div>
              <div class="sidebar__subtitle">Bally • 1992</div>
              <div class="flex flex-wrap gap-2 mt-2">
                <button class="pill pill--status-fixing">
                  <i class="fa-solid fa-wrench text-xs"></i>
                  Fixing
                  <i class="fa-solid fa-caret-down text-xs"></i>
                </button>
                <button class="pill pill--neutral">
                  <i class="fa-solid fa-location-dot text-xs"></i>
                  Workshop
                  <i class="fa-solid fa-caret-down text-xs"></i>
                </button>
              </div>
            </div>
            <!-- ACTIONS -->
            <div class="sidebar__section">
              <div class="flex" style="flex-direction: column; gap: var(--space-2);">
                <a href="#" class="btn btn--secondary btn--full">
                  <i class="fa-solid fa-gear text-xs"></i>
                  Edit Machine
                </a>
                <a href="#" class="btn btn--report btn--full">
                  <i class="fa-solid fa-bug text-xs"></i>
                  Report Problem
                </a>
                <a href="#" class="btn btn--log btn--full">
                  <i class="fa-solid fa-screwdriver-wrench text-xs"></i>
                  Log Work
                </a>
              </div>
            </div>
          </div>
        </aside>
        <!-- MAIN COLUMN -->
        <div class="two-column__main">
          <!-- FILTER BAR -->
          <div class="filter-bar">
            <!-- Filter Buttons -->
            <div class="filter-bar__filters">
              <button class="pill pill--filter pill--filter-active">
                <i class="fa-solid fa-list"></i> All Activity
              </button>
              <button class="pill pill--filter pill--neutral">
                <i class="fa-solid fa-screwdriver-wrench"></i> Logs Only
              </button>
              <button class="pill pill--filter pill--neutral">
                <i class="fa-solid fa-bug"></i> Problems Only
              </button>
            </div>
            <!-- Search Box -->
            <div class="filter-bar__search">
              <input type="search"
                     placeholder="Search..."
                     class="filter-bar__search-input">
              <i class="fa-solid fa-magnifying-glass filter-bar__search-icon"></i>
            </div>
          </div>
          <!-- ACTIVITY FEED (Timeline) -->
          <div class="timeline">
            <!-- Timeline Line -->
            <div class="timeline__line"></div>
            <!-- WORK LOG ENTRY with linked problem -->
            <div class="timeline__entry">
              <div class="timeline__entry-inner">
                <div class="timeline__icon timeline__icon--log">
                  <i class="fa-solid fa-screwdriver-wrench"></i>
                </div>
                <div class="timeline__content">
                  <div class="card card--log timeline__card">
                    <div class="timeline__header">
                      <span class="timeline__title timeline__title--log">Work</span>
                      <span class="timeline__meta">PinballWizard99 • Just now</span>
                    </div>
                    <p class="timeline__body mb-2">
                      Replaced the coil on the upper right flipper. It was showing resistance issues. Test played one game, feels snappy now.
                    </p>
                    <div class="snippet-row">
                      <span class="snippet-label text-problem"><i class="fa-solid fa-bug mr-1"></i>Problem:</span>
                      <span class="snippet-text">Top right flipper barely moves when I hit the button. Ball gets stuck.</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- WORK LOG ENTRY without problem -->
            <div class="timeline__entry">
              <div class="timeline__entry-inner">
                <div class="timeline__icon timeline__icon--log">
                  <i class="fa-solid fa-screwdriver-wrench"></i>
                </div>
                <div class="timeline__content">
                  <div class="card card--log timeline__card">
                    <div class="timeline__header">
                      <span class="timeline__title timeline__title--log">Work</span>
                      <span class="timeline__meta">TechSam • 20 mins ago</span>
                    </div>
                    <p class="timeline__body">
                      Cleaned optos and reseated connectors on the trough board. No faults observed after 10 test games.
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <!-- PROBLEM REPORT with latest log -->
            <div class="timeline__entry">
              <div class="timeline__entry-inner">
                <div class="timeline__icon timeline__icon--problem">
                  <i class="fa-solid fa-bug"></i>
                </div>
                <div class="timeline__content">
                  <div class="card card--problem timeline__card">
                    <div class="timeline__header">
                      <div class="flex items-center gap-2">
                        <span class="timeline__title timeline__title--problem">Problem #47</span>
                        <span class="badge badge--warning">Open</span>
                      </div>
                      <span class="timeline__meta">Visitor • Yesterday</span>
                    </div>
                    <p class="timeline__body mb-2">Top right flipper barely moves when I hit the button. Ball gets stuck.</p>
                    <div class="snippet-row">
                      <span class="snippet-label text-log"><i class="fa-solid fa-screwdriver-wrench mr-1"></i>Latest:</span>
                      <span class="snippet-text">Replaced the coil on the upper right flipper. It was showing resistance issues.</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- PROBLEM REPORT closed -->
            <div class="timeline__entry">
              <div class="timeline__entry-inner">
                <div class="timeline__icon timeline__icon--problem">
                  <i class="fa-solid fa-bug"></i>
                </div>
                <div class="timeline__content">
                  <div class="card card--problem timeline__card">
                    <div class="timeline__header">
                      <div class="flex items-center gap-2">
                        <span class="timeline__title timeline__title--problem">Problem #46</span>
                        <span class="badge badge--success">Closed</span>
                      </div>
                      <span class="timeline__meta">LeaguePlayer • 2 days ago</span>
                    </div>
                    <p class="timeline__body">Left sling occasionally rapid-fires when the game is idle. Seems intermittent.</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <!-- Theme Switcher (for demo only) -->
    <div class="theme-switcher">
      <button data-theme="default"
              class="theme-switcher__btn theme-switcher__btn--active">Light</button>
      <button data-theme="dark3" class="theme-switcher__btn">Dark</button>
    </div>
    <script>
      // Desktop Account Dropdown
      function toggleAccountMenu() {
        const menu = document.getElementById('account-menu');
        menu.classList.toggle('hidden');
        // Close admin menus when opening account menu
        document.getElementById('admin-menu-desktop').classList.add('hidden');
        document.getElementById('admin-menu-mobile').classList.add('hidden');
      }

      // Admin Dropdown
      function toggleAdminMenu(variant) {
        const menu = document.getElementById('admin-menu-' + variant);
        menu.classList.toggle('hidden');
        // Close the other admin menu and account menu
        const otherVariant = variant === 'desktop' ? 'mobile' : 'desktop';
        document.getElementById('admin-menu-' + otherVariant).classList.add('hidden');
        document.getElementById('account-menu').classList.add('hidden');
      }

      // Close menus on outside click
      document.addEventListener('click', function(event) {
        const accountMenu = document.getElementById('account-menu');
        const accountToggle = document.getElementById('account-dropdown-toggle');
        const adminMenuDesktop = document.getElementById('admin-menu-desktop');
        const adminToggleDesktop = document.getElementById('admin-dropdown-toggle-desktop');
        const adminMenuMobile = document.getElementById('admin-menu-mobile');
        const adminToggleMobile = document.getElementById('admin-dropdown-toggle-mobile');

        // Close account menu if clicking outside
        if (accountMenu && accountToggle && !accountMenu.contains(event.target) && !accountToggle.contains(event.target)) {
          accountMenu.classList.add('hidden');
        }

        // Close admin desktop menu if clicking outside
        if (adminMenuDesktop && adminToggleDesktop && !adminMenuDesktop.contains(event.target) && !adminToggleDesktop.contains(event.target)) {
          adminMenuDesktop.classList.add('hidden');
        }

        // Close admin mobile menu if clicking outside
        if (adminMenuMobile && adminToggleMobile && !adminMenuMobile.contains(event.target) && !adminToggleMobile.contains(event.target)) {
          adminMenuMobile.classList.add('hidden');
        }
      });

      // Theme switching
      (function() {
        const buttons = document.querySelectorAll('.theme-switcher__btn');

        function setTheme(theme) {
          document.body.setAttribute('data-theme', theme);
          buttons.forEach(btn => {
            btn.classList.toggle('theme-switcher__btn--active', btn.dataset.theme === theme);
          });
        }

        buttons.forEach(btn => {
          btn.addEventListener('click', () => setTheme(btn.dataset.theme));
        });

        setTheme('default');
      })();
    </script>
  </body>
</html>
