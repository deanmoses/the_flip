<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Flip - Machine Detail (Sidebar Layout)</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap"
          rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Custom Palette - Light Theme and Dark Theme */
        :root {
            --color-background: #FBF7F0;
            --color-surface: #FFFFFF;
            --color-text-dark: #333333;
            --color-text-muted: #6b7280;
            --color-accent-amber: #F59E0B;
            --color-border-soft: #E7E5E4;

            /* Work Log Theme */
            --color-log-base: #1D4ED8;
            --color-log-hover: #1E40AF;
            --color-log-light-bg: #F0F9FF;
            --color-log-light-border: #93C5FD;

            /* Problem Report Theme */
            --color-problem-base: #DC2626;
            --color-problem-hover: #B91C1C;
            --color-problem-light-bg: #FEF2F2;
            --color-problem-light-border: #FCA5A5;

            /* Warning */
            --color-warning-base: #DC2626;
            --color-warning-text: #ffffff;
        }

        /* Dark Theme */
        body[data-theme="dark3"] {
            --color-background: #1f1f1f;
            --color-surface: #252525;
            --color-text-dark: #cccccc;
            --color-text-muted: #9ca3af;
            --color-accent-amber: #0078d4;
            --color-border-soft: #2b2b2b;
            --color-log-base: #0078d4;
            --color-log-hover: #026ec1;
            --color-log-light-bg: #1a2332;
            --color-log-light-border: #2a3a4d;
            --color-problem-base: #f85149;
            --color-problem-hover: #e64545;
            --color-problem-light-bg: #2d1f1f;
            --color-problem-light-border: #4a2d2d;
            --color-warning-base: #f85149;
            --color-warning-text: #ffffff;
            --color-secondary-bg: #3a3a3a;
            --color-secondary-text: #e5e7eb;
            --color-secondary-border: #4a4a4a;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-background);
            color: var(--color-text-dark);
            overflow-x: hidden;
            background-image: linear-gradient(0deg, rgba(0, 0, 0, .01) 50%, transparent 50%), linear-gradient(90deg, rgba(0, 0, 0, .01) 50%, transparent 50%);
            background-size: 4px 4px;
        }

        .card-style {
            background-color: var(--color-surface);
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--color-border-soft);
        }

        .button-style {
            border-radius: 8px;
            transition: all 0.15s ease-in-out;
        }

        .button-style:hover {
            opacity: 0.9;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .log-button {
            background-color: var(--color-log-base);
        }

        .log-button:hover {
            background-color: var(--color-log-hover);
        }

        .report-button {
            background-color: var(--color-problem-base);
        }

        .report-button:hover {
            background-color: var(--color-problem-hover);
        }

        .brand-logo {
            height: 64px;
            width: auto;
            display: block;
        }

        .app-header {
            background: var(--color-surface);
            color: var(--color-text-dark);
        }

        .nav-active {
            color: var(--color-accent-amber);
            border-bottom: 2px solid var(--color-accent-amber);
        }

        .nav-link {
            color: var(--color-text-dark);
            border-bottom: 2px solid transparent;
        }

        .nav-link:hover {
            color: var(--color-accent-amber);
            border-bottom-color: var(--color-border-soft);
        }

        /* Mobile Nav Icons */
        .nav-icon {
            color: var(--color-text-muted);
        }

        .nav-icon:hover {
            color: var(--color-accent-amber);
        }

        .nav-icon-active {
            color: var(--color-accent-amber);
        }

        /* Dropdown Menu */
        .dropdown-menu {
            background-color: var(--color-surface);
        }

        .dropdown-item:hover {
            background-color: var(--color-border-soft);
        }

        /* Pill Styles */
        .pill-style {
            border-radius: 9999px;
            padding: 0.4rem 1rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            line-height: 1;
        }

        .status-pill-fixing {
            background-color: #FEF3C7;
            color: #B45309;
            border: 1px solid #FCD34D;
        }

        .status-pill-good {
            background-color: #D1FAE5;
            color: #065F46;
            border: 1px solid #6EE7B7;
        }

        /* Sidebar section */
        .sidebar-section {
            border-bottom: 1px solid var(--color-border-soft);
            padding-bottom: 1rem;
            margin-bottom: 1rem;
        }

        .sidebar-section:last-child {
            border-bottom: none;
            padding-bottom: 0;
            margin-bottom: 0;
        }

        .sidebar-label {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--color-text-muted);
            margin-bottom: 0.5rem;
        }

        /* Filter bar */
        .filter-active {
            background-color: var(--color-accent-amber);
            color: #fff;
        }

        .filter-active:hover {
            background-color: #d97706;
        }

        /* Activity card styles */
        .log-entry-card {
            background-color: var(--color-log-light-bg);
            border: 1px solid var(--color-log-light-border);
        }

        .problem-entry-card {
            background-color: var(--color-problem-light-bg);
            border: 1px solid var(--color-problem-light-border);
        }

        .log-color-bg {
            background-color: var(--color-log-base);
        }

        .log-color-text {
            color: var(--color-log-base);
        }

        .problem-color-bg {
            background-color: var(--color-problem-base);
        }

        .problem-color-text {
            color: var(--color-problem-base);
        }

        .badge-warning {
            background: var(--color-warning-base);
            color: var(--color-warning-text);
        }

        /* Timeline */
        .timeline-line {
            border-left: 2px solid var(--color-border-soft);
        }

        /* Snippet row for linked items */
        .snippet-row {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            padding-top: 0.5rem;
            margin-top: 0.25rem;
            border-top: 1px solid var(--color-border-soft);
            font-size: 0.875rem;
            line-height: 1.3;
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
        }

        .snippet-label {
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .snippet-text {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            color: var(--color-text-muted);
            flex: 1;
        }

        /* Theme switcher (here for HTML prototype, don't put in live app*/
        .theme-switcher {
            position: fixed;
            bottom: 1rem;
            left: 1rem;
            background: var(--color-surface);
            border: 1px solid var(--color-border-soft);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
            border-radius: 9999px;
            padding: 0.35rem 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            z-index: 40;
            font-size: 0.9rem;
        }

        .theme-switcher button {
            border: none;
            background: transparent;
            padding: 0.2rem 0.6rem;
            border-radius: 9999px;
            cursor: pointer;
            color: var(--color-text-dark);
            font-weight: 600;
            transition: background 0.15s ease, color 0.15s ease;
        }

        .theme-switcher button:hover {
            background: var(--color-border-soft);
        }

        .theme-switcher button.is-active {
            background: var(--color-accent-amber);
            color: #fff;
        }

        /* Dark theme text overrides */
        body[data-theme="dark3"] h1,
        body[data-theme="dark3"] h2,
        body[data-theme="dark3"] h3,
        body[data-theme="dark3"] .text-gray-800,
        body[data-theme="dark3"] .text-gray-700,
        body[data-theme="dark3"] .text-gray-600 {
            color: #e5e7eb !important;
        }

        body[data-theme="dark3"] .text-gray-500,
        body[data-theme="dark3"] .text-gray-400 {
            color: #9ca3af !important;
        }

        /* Dark mode: fix secondary buttons and pills */
        body[data-theme="dark3"] .bg-gray-100 {
            background-color: var(--color-secondary-bg) !important;
        }

        body[data-theme="dark3"] .border-gray-300 {
            border-color: var(--color-secondary-border) !important;
        }

        /* Main content needs padding for the fixed header */
        #main-content {
            padding-top: 5rem;
        }
    </style>
  </head>
  <body>
    <!-- === PERSISTENT SITE HEADER === -->
    <header class="app-header fixed top-0 w-full border-b border-gray-200 z-30 p-3 shadow-sm flex justify-between items-center h-16">
      <a href="#" class="flex items-center gap-2 shrink-0">
        <img src="../../../the_flip/static/core/images/logo_blue.svg"
             alt="The Flip"
             class="brand-logo">
      </a>
      <!-- Desktop nav (md+) -->
      <nav class="hidden md:flex gap-4 text-base font-medium items-center">
        <a href="#" class="px-3 py-1 font-bold nav-active">Machines</a>
        <a href="#" class="px-3 py-1 nav-link">Problem Reports</a>
        <a href="#" class="px-3 py-1 nav-link">Logs</a>
        <!-- Admin Dropdown (superadmin only) -->
        <div class="relative">
          <button id="admin-dropdown-toggle-desktop"
                  class="px-3 py-1 nav-link flex items-center gap-1"
                  onclick="toggleAdminMenu('desktop')">
            Admin <i class="fa-solid fa-caret-down text-xs"></i>
          </button>
          <div id="admin-menu-desktop"
               class="hidden absolute left-0 top-8 w-56 card-style p-3 shadow-xl text-base z-50 dropdown-menu">
            <a href="#" class="block p-2 dropdown-item rounded-lg"><i class="fa-solid fa-users-gear mr-2"></i> Shared Accounts</a>
            <a href="#" class="block p-2 dropdown-item rounded-lg"><i class="fa-solid fa-envelope mr-2"></i> Invite User</a>
            <a href="#" class="block p-2 dropdown-item rounded-lg"><i class="fa-solid fa-toolbox mr-2"></i> Django Admin</a>
          </div>
        </div>
      </nav>
      <!-- Mobile nav (icon-only) -->
      <nav class="flex md:hidden gap-3 text-xl items-center">
        <a href="#" class="p-2 nav-icon-active"><i class="fa-solid fa-list"></i></a>
        <a href="#" class="p-2 nav-icon"><i class="fa-solid fa-triangle-exclamation"></i></a>
        <a href="#" class="p-2 nav-icon"><i class="fa-solid fa-screwdriver-wrench"></i></a>
        <!-- Admin Dropdown (superadmin only) -->
        <div class="relative">
          <button id="admin-dropdown-toggle-mobile"
                  class="p-2 nav-icon"
                  onclick="toggleAdminMenu('mobile')">
            <i class="fa-solid fa-users"></i>
          </button>
          <div id="admin-menu-mobile"
               class="hidden absolute right-0 top-10 w-56 card-style p-3 shadow-xl text-base z-50 dropdown-menu">
            <a href="#" class="block p-2 dropdown-item rounded-lg"><i class="fa-solid fa-users-gear mr-2"></i> Shared Accounts</a>
            <a href="#" class="block p-2 dropdown-item rounded-lg"><i class="fa-solid fa-envelope mr-2"></i> Invite User</a>
            <a href="#" class="block p-2 dropdown-item rounded-lg"><i class="fa-solid fa-toolbox mr-2"></i> Django Admin</a>
          </div>
        </div>
      </nav>
      <div class="flex items-center gap-2 md:gap-4 relative">
        <div id="account-dropdown-toggle"
             class="flex w-9 h-9 bg-amber-600 text-white rounded-full items-center justify-center font-bold text-sm cursor-pointer"
             onclick="toggleAccountMenu()">PW</div>
        <div id="account-menu"
             class="hidden absolute right-0 top-10 w-48 card-style p-3 shadow-xl text-base z-50 dropdown-menu">
          <p class="text-sm text-gray-500 mb-2">PinballWizard99</p>
          <a href="#" class="block p-2 dropdown-item rounded-lg"><i class="fa-solid fa-gear mr-2"></i> Account</a>
          <a href="#" class="block p-2 dropdown-item rounded-lg text-red-600"><i class="fa-solid fa-right-from-bracket mr-2"></i> Logout</a>
        </div>
      </div>
    </header>
    <!-- === MAIN CONTENT === -->
    <main id="main-content" class="p-4 lg:p-8 max-w-6xl mx-auto relative">
      <!-- BREADCRUMBS -->
      <div class="text-gray-500 mb-4 flex items-center gap-2 text-sm lg:text-base">
        <a href="#" class="text-gray-500 hover:text-amber-600 transition">Machines</a>
        <span>/</span>
        <span class="font-semibold text-gray-700">The Addams Family</span>
      </div>
      <!-- TWO COLUMN LAYOUT: Main Content + Sidebar -->
      <div class="flex flex-col lg:flex-row gap-5">
        <!-- MOBILE ACTION BUTTONS (visible on mobile only) -->
        <div class="lg:hidden flex gap-2">
          <a href="#"
             class="button-style bg-gray-100 text-gray-700 px-3 py-1.5 text-sm font-medium flex items-center justify-center gap-1 border border-gray-300 hover:bg-gray-200 flex-1">
            <i class="fa-solid fa-gear text-xs"></i>
            Edit
          </a>
          <a href="#"
             class="button-style report-button text-white px-3 py-1.5 text-sm font-semibold flex items-center justify-center gap-1 flex-1">
            <i class="fa-solid fa-bug text-xs"></i>
            Report
          </a>
          <a href="#"
             class="button-style log-button text-white px-3 py-1.5 text-sm font-semibold flex items-center justify-center gap-1 flex-1">
            <i class="fa-solid fa-screwdriver-wrench text-xs"></i>
            Log
          </a>
        </div>
        <!-- SIDEBAR (desktop only) -->
        <div class="hidden lg:block lg:order-2 lg:w-72 shrink-0">
          <div class="card-style p-4 lg:sticky lg:top-20">
            <!-- MACHINE INFO -->
            <div class="sidebar-section">
              <div class="sidebar-label">Machine</div>
              <div class="font-semibold text-gray-800 text-lg">The Addams Family</div>
              <div class="text-sm text-gray-500">Bally • 1992</div>
              <div class="flex flex-wrap gap-2 mt-2">
                <button class="pill-style status-pill-fixing text-xs py-1 px-2">
                  <i class="fa-solid fa-wrench text-xs"></i>
                  Fixing
                  <i class="fa-solid fa-caret-down text-xs ml-1"></i>
                </button>
                <button class="pill-style bg-gray-100 text-gray-700 border border-gray-300 text-xs py-1 px-2">
                  <i class="fa-solid fa-location-dot text-xs"></i>
                  Workshop
                  <i class="fa-solid fa-caret-down text-xs ml-1"></i>
                </button>
              </div>
            </div>
            <!-- ACTIONS -->
            <div class="sidebar-section">
              <div class="space-y-2">
                <a href="#"
                   class="button-style bg-gray-100 text-gray-700 px-4 py-1.5 text-sm font-medium flex items-center justify-center gap-2 border border-gray-300 hover:bg-gray-200 w-full">
                  <i class="fa-solid fa-gear text-xs"></i>
                  Edit Machine
                </a>
                <a href="#"
                   class="button-style report-button text-white px-4 py-1.5 text-sm font-semibold flex items-center justify-center gap-2 w-full">
                  <i class="fa-solid fa-bug text-xs"></i>
                  Report Problem
                </a>
                <a href="#"
                   class="button-style log-button text-white px-4 py-1.5 text-sm font-semibold flex items-center justify-center gap-2 w-full">
                  <i class="fa-solid fa-screwdriver-wrench text-xs"></i>
                  Log Work
                </a>
              </div>
            </div>
          </div>
        </div>
        <!-- MAIN COLUMN -->
        <div class="flex-1 lg:order-1">
          <!-- FILTER BAR -->
          <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4 pb-3 border-b border-gray-200">
            <!-- Filter Buttons -->
            <div class="flex gap-2 overflow-x-auto pb-1 shrink-0">
              <button class="pill-style filter-active shadow-sm px-3 py-1.5 text-xs font-semibold whitespace-nowrap transition">
                <i class="fa-solid fa-list"></i> All Activity
              </button>
              <button class="pill-style bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200 px-3 py-1.5 text-xs font-semibold whitespace-nowrap transition">
                <i class="fa-solid fa-screwdriver-wrench"></i> Logs Only
              </button>
              <button class="pill-style bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200 px-3 py-1.5 text-xs font-semibold whitespace-nowrap transition">
                <i class="fa-solid fa-bug"></i> Problems Only
              </button>
            </div>
            <!-- Search Box -->
            <div class="relative flex-1 w-full min-w-0">
              <input type="search"
                     placeholder="Search..."
                     class="w-full pl-8 pr-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-amber-500 focus:border-amber-500 transition shadow-sm">
              <i class="fa-solid fa-magnifying-glass absolute left-2.5 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"></i>
            </div>
          </div>
          <!-- ACTIVITY FEED (Timeline) -->
          <div class="relative pl-4">
            <!-- Timeline Line -->
            <div class="absolute left-5 top-0 bottom-0 timeline-line w-0.5 z-0"></div>
            <!-- WORK LOG ENTRY with linked problem -->
            <div class="relative z-10 mb-6">
              <div class="flex items-start gap-3">
                <div class="w-6 h-6 rounded-full flex items-center justify-center text-white text-xs shrink-0 mt-1 shadow-sm border-2 border-white log-color-bg">
                  <i class="fa-solid fa-screwdriver-wrench text-xs"></i>
                </div>
                <div class="card-style p-3 flex-1 log-entry-card">
                  <div class="flex justify-between items-start mb-1">
                    <span class="font-semibold text-sm log-color-text">Work</span>
                    <span class="text-gray-500 text-xs">PinballWizard99 • Just now</span>
                  </div>
                  <p class="text-sm text-gray-800 mb-2">
                    Replaced the coil on the upper right flipper. It was showing resistance issues. Test played one game, feels snappy now.
                  </p>
                  <div class="snippet-row">
                    <span class="snippet-label problem-color-text text-xs"><i class="fa-solid fa-bug mr-1"></i>Problem:</span>
                    <span class="snippet-text text-xs">Top right flipper barely moves when I hit the button. Ball gets stuck.</span>
                  </div>
                </div>
              </div>
            </div>
            <!-- WORK LOG ENTRY without problem -->
            <div class="relative z-10 mb-6">
              <div class="flex items-start gap-3">
                <div class="w-6 h-6 rounded-full flex items-center justify-center text-white text-xs shrink-0 mt-1 shadow-sm border-2 border-white log-color-bg">
                  <i class="fa-solid fa-screwdriver-wrench text-xs"></i>
                </div>
                <div class="card-style p-3 flex-1 log-entry-card">
                  <div class="flex justify-between items-start mb-1">
                    <span class="font-semibold text-sm log-color-text">Work</span>
                    <span class="text-gray-500 text-xs">TechSam • 20 mins ago</span>
                  </div>
                  <p class="text-sm text-gray-800">
                    Cleaned optos and reseated connectors on the trough board. No faults observed after 10 test games.
                  </p>
                </div>
              </div>
            </div>
            <!-- PROBLEM REPORT with latest log -->
            <div class="relative z-10 mb-6">
              <div class="flex items-start gap-3">
                <div class="w-6 h-6 rounded-full flex items-center justify-center text-white text-xs shrink-0 mt-1 shadow-sm border-2 border-white problem-color-bg">
                  <i class="fa-solid fa-bug text-xs"></i>
                </div>
                <div class="card-style p-3 flex-1 problem-entry-card">
                  <div class="flex justify-between items-start mb-1">
                    <div class="flex items-center gap-2">
                      <span class="font-semibold text-sm problem-color-text">Problem #47</span>
                      <span class="px-1.5 py-0.5 text-xs font-bold rounded badge-warning">Open</span>
                    </div>
                    <span class="text-gray-500 text-xs">Visitor • Yesterday</span>
                  </div>
                  <p class="text-sm text-gray-800 mb-2">Top right flipper barely moves when I hit the button. Ball gets stuck.</p>
                  <div class="snippet-row">
                    <span class="snippet-label log-color-text text-xs"><i class="fa-solid fa-screwdriver-wrench mr-1"></i>Latest:</span>
                    <span class="snippet-text text-xs">Replaced the coil on the upper right flipper. It was showing resistance issues.</span>
                  </div>
                </div>
              </div>
            </div>
            <!-- PROBLEM REPORT closed -->
            <div class="relative z-10 mb-6">
              <div class="flex items-start gap-3">
                <div class="w-6 h-6 rounded-full flex items-center justify-center text-white text-xs shrink-0 mt-1 shadow-sm border-2 border-white problem-color-bg">
                  <i class="fa-solid fa-bug text-xs"></i>
                </div>
                <div class="card-style p-3 flex-1 problem-entry-card">
                  <div class="flex justify-between items-start mb-1">
                    <div class="flex items-center gap-2">
                      <span class="font-semibold text-sm problem-color-text">Problem #46</span>
                      <span class="px-1.5 py-0.5 text-xs font-bold rounded bg-green-600 text-white">Closed</span>
                    </div>
                    <span class="text-gray-500 text-xs">LeaguePlayer • 2 days ago</span>
                  </div>
                  <p class="text-sm text-gray-800">Left sling occasionally rapid-fires when the game is idle. Seems intermittent.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <!-- Theme Switcher (for demo only) -->
    <div class="theme-switcher">
      <button data-theme="default" class="is-active">Light</button>
      <button data-theme="dark3">Dark</button>
    </div>
    <script>
      // Desktop Account Dropdown
      function toggleAccountMenu() {
        const menu = document.getElementById('account-menu');
        menu.classList.toggle('hidden');
        // Close admin menus when opening account menu
        document.getElementById('admin-menu-desktop').classList.add('hidden');
        document.getElementById('admin-menu-mobile').classList.add('hidden');
      }

      // Admin Dropdown
      function toggleAdminMenu(variant) {
        const menu = document.getElementById('admin-menu-' + variant);
        menu.classList.toggle('hidden');
        // Close the other admin menu and account menu
        const otherVariant = variant === 'desktop' ? 'mobile' : 'desktop';
        document.getElementById('admin-menu-' + otherVariant).classList.add('hidden');
        document.getElementById('account-menu').classList.add('hidden');
      }

      // Close menus on outside click
      document.addEventListener('click', function(event) {
        const accountMenu = document.getElementById('account-menu');
        const accountToggle = document.getElementById('account-dropdown-toggle');
        const adminMenuDesktop = document.getElementById('admin-menu-desktop');
        const adminToggleDesktop = document.getElementById('admin-dropdown-toggle-desktop');
        const adminMenuMobile = document.getElementById('admin-menu-mobile');
        const adminToggleMobile = document.getElementById('admin-dropdown-toggle-mobile');

        // Close account menu if clicking outside
        if (accountMenu && accountToggle && !accountMenu.contains(event.target) && !accountToggle.contains(event.target)) {
          accountMenu.classList.add('hidden');
        }

        // Close admin desktop menu if clicking outside
        if (adminMenuDesktop && adminToggleDesktop && !adminMenuDesktop.contains(event.target) && !adminToggleDesktop.contains(event.target)) {
          adminMenuDesktop.classList.add('hidden');
        }

        // Close admin mobile menu if clicking outside
        if (adminMenuMobile && adminToggleMobile && !adminMenuMobile.contains(event.target) && !adminToggleMobile.contains(event.target)) {
          adminMenuMobile.classList.add('hidden');
        }
      });

      // Theme switching
      (function() {
        const buttons = document.querySelectorAll('.theme-switcher button');

        function setTheme(theme) {
          document.body.setAttribute('data-theme', theme);
          buttons.forEach(btn => {
            btn.classList.toggle('is-active', btn.dataset.theme === theme);
          });
        }

        buttons.forEach(btn => {
          btn.addEventListener('click', () => setTheme(btn.dataset.theme));
        });

        setTheme('default');
      })();
    </script>
  </body>
</html>
