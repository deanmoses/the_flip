<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Flip - Visual Design v10 (Alt Horizontal Buttons)</title>
    <!-- Using Inter for high legibility, styled to feel warm/friendly -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap"
          rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Custom Palette for 70s Retro/Logbook Feel (Light Mode) */
        :root {
            --color-background: #FBF7F0;
            /* Creamy off-white (Stone/Beige tone) */
            --color-surface: #FFFFFF;
            /* Pure white for lifted elements */
            --color-text-dark: #333333;
            --color-accent-amber: #F59E0B;
            /* Muted Gold/Amber for primary actions */
            --color-border-soft: #E7E5E4;
            /* Soft border/separator */

            /* === THEME COLORS (Centralized) === */
            /* Log / Success Theme (Blue-700/800 base) */
            --color-log-base: #1D4ED8;
            /* Tailwind Blue-700 (Main Button, Icon) */
            --color-log-hover: #1E40AF;
            /* Tailwind Blue-800 (Hover state) */
            --color-log-light-bg: #F0F9FF;
            /* Tailwind Blue-50 (Card Background) */
            --color-log-light-border: #93C5FD;
            /* Tailwind Blue-300 (Card Border) */

            /* Problem / Alert Theme (Red-600/700 base) */
            --color-problem-base: #DC2626;
            /* Tailwind Red-600 (Main Button, Icon, OPEN Pill) */
            --color-problem-hover: #B91C1C;
            /* Tailwind Red-700 (Hover state) */
            --color-problem-light-bg: #FEF2F2;
            /* Tailwind Red-50 (Card Background) */
            --color-problem-light-border: #FCA5A5;
            /* Tailwind Red-300 (Card Border) */

            /* Status / Error */
            --color-warning-base: #DC2626;
            --color-warning-text: #ffffff;
            /* === END THEME COLORS === */
        }

        /* Alternate themes (switch via body[data-theme]) */
        body[data-theme="slate"] {
            --color-background: #f5f7fb;
            --color-surface: #ffffff;
            --color-text-dark: #1f2937;
            --color-accent-amber: #0ea5e9;
            /* Sky blue accent */
            --color-border-soft: #e5e7eb;
            --color-log-base: #2563eb;
            --color-log-hover: #1d4ed8;
            --color-log-light-bg: #eff6ff;
            --color-log-light-border: #bfdbfe;
            --color-problem-base: #b91c1c;
            /* Deep red */
            --color-problem-hover: #991b1b;
            --color-problem-light-bg: #fef2f2;
            --color-problem-light-border: #fecdd3;
        }

        body[data-theme="forest"] {
            --color-background: #f3f7f2;
            --color-surface: #ffffff;
            --color-text-dark: #1f2a1d;
            --color-accent-amber: #10b981;
            /* Emerald accent */
            --color-border-soft: #dfe7dd;
            --color-log-base: #047857;
            /* Deep green for logs */
            --color-log-hover: #065f46;
            --color-log-light-bg: #ecfdf3;
            --color-log-light-border: #a7f3d0;
            --color-problem-base: #d97706;
            /* Warm amber for problems */
            --color-problem-hover: #b45309;
            --color-problem-light-bg: #fff7ed;
            --color-problem-light-border: #fed7aa;
        }

        body[data-theme="midnight"] {
            --color-background: #0f172a;
            --color-surface: #1b263f;
            --color-text-dark: #e5e7eb;
            --color-accent-amber: #22d3ee;
            /* Cyan accent */
            --color-border-soft: #334155;
            --color-log-base: #38bdf8;
            /* Lighter cyan for logs */
            --color-log-hover: #0ea5e9;
            --color-log-light-bg: #0b1120;
            --color-log-light-border: #1d4ed8;
            --color-problem-base: #ef4444;
            /* Bright red for problems */
            --color-problem-hover: #dc2626;
            --color-problem-light-bg: #1f0a0a;
            --color-problem-light-border: #b91c1c;
            --color-warning-base: #ef4444;
            --color-warning-text: #ffffff;
        }

        /* VS Code Dark Modern inspired */
        body[data-theme="dark2"] {
            --color-background: #1f1f1f;
            /* editor.background */
            --color-surface: #252525;
            /* button/controls background-ish */
            --color-text-dark: #cccccc;
            /* editor.foreground */
            --color-accent-amber: #0078d4;
            /* button/focusBorder */
            --color-border-soft: #2b2b2b;
            /* activityBar.border */
            --color-log-base: #0078d4;
            /* match accent */
            --color-log-hover: #026ec1;
            /* button.hoverBackground */
            --color-log-light-bg: #181818;
            /* activityBar background */
            --color-log-light-border: #2b2b2b;
            /* tab border */
            --color-problem-base: #f85149;
            /* errorForeground */
            --color-problem-hover: #e64545;
            /* slightly darker hover */
            --color-problem-light-bg: #2b2b2b;
            /* textBlockQuote background */
            --color-problem-light-border: #616161;
            /* textBlockQuote border */
            --color-warning-base: #f85149;
            --color-warning-text: #ffffff;
        }

        /* Dark 3: same palette as Dark 2 but uses default (blue) logo */
        body[data-theme="dark3"] {
            --color-background: #1f1f1f;
            --color-surface: #252525;
            --color-text-dark: #cccccc;
            --color-accent-amber: #0078d4;
            --color-border-soft: #2b2b2b;
            --color-log-base: #0078d4;
            --color-log-hover: #026ec1;
            --color-log-light-bg: #181818;
            --color-log-light-border: #2b2b2b;
            --color-problem-base: #f85149;
            --color-problem-hover: #e64545;
            --color-problem-light-bg: #2b2b2b;
            --color-problem-light-border: #616161;
            --color-warning-base: #f85149;
            --color-warning-text: #ffffff;
        }

        /* Dark theme text overrides for readability */
        body[data-theme="midnight"],
        body[data-theme="dark2"],
        body[data-theme="dark3"] {
            color: var(--color-text-dark);
        }

        body[data-theme="midnight"] h1,
        body[data-theme="midnight"] h2,
        body[data-theme="midnight"] h3,
        body[data-theme="midnight"] .text-gray-800,
        body[data-theme="midnight"] .text-gray-700,
        body[data-theme="midnight"] .text-gray-600,
        body[data-theme="dark2"] h1,
        body[data-theme="dark2"] h2,
        body[data-theme="dark2"] h3,
        body[data-theme="dark2"] .text-gray-800,
        body[data-theme="dark2"] .text-gray-700,
        body[data-theme="dark2"] .text-gray-600,
        body[data-theme="dark3"] h1,
        body[data-theme="dark3"] h2,
        body[data-theme="dark3"] h3,
        body[data-theme="dark3"] .text-gray-800,
        body[data-theme="dark3"] .text-gray-700,
        body[data-theme="dark3"] .text-gray-600 {
            color: #e5e7eb !important;
        }

        body[data-theme="midnight"] .text-gray-500,
        body[data-theme="midnight"] .text-gray-400,
        body[data-theme="dark2"] .text-gray-500,
        body[data-theme="dark2"] .text-gray-400,
        body[data-theme="dark3"] .text-gray-500,
        body[data-theme="dark3"] .text-gray-400 {
            color: #cbd5e1 !important;
        }

        /* Dark theme: ensure text on light buttons/pills stays dark for contrast */
        body[data-theme="midnight"] .button-style.bg-gray-100,
        body[data-theme="midnight"] .button-style.bg-white,
        body[data-theme="midnight"] .pill-style.bg-gray-100,
        body[data-theme="midnight"] .status-pill-fixing,
        body[data-theme="dark2"] .button-style.bg-gray-100,
        body[data-theme="dark2"] .button-style.bg-white,
        body[data-theme="dark2"] .pill-style.bg-gray-100,
        body[data-theme="dark2"] .status-pill-fixing,
        body[data-theme="dark3"] .button-style.bg-gray-100,
        body[data-theme="dark3"] .button-style.bg-white,
        body[data-theme="dark3"] .pill-style.bg-gray-100,
        body[data-theme="dark3"] .status-pill-fixing {
            color: #111827 !important;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-background);
            color: var(--color-text-dark);
            overflow-x: hidden;
            /* Optional: Add a subtle paper texture/grain */
            background-image: linear-gradient(0deg, rgba(0, 0, 0, .01) 50%, transparent 50%), linear-gradient(90deg, rgba(0, 0, 0, .01) 50%, transparent 50%);
            background-size: 4px 4px;
        }

        .card-style {
            background-color: var(--color-surface);
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
            /* Subtle shadow for lift */
            border: 1px solid var(--color-border-soft);
        }

        .button-style {
            border-radius: 8px;
            transition: all 0.15s ease-in-out;
        }

        .button-style:hover {
            opacity: 0.9;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        /* Themed Buttons using variables */
        .log-button {
            background-color: var(--color-log-base);
        }

        .log-button:hover {
            background-color: var(--color-log-hover);
        }

        .report-button {
            background-color: var(--color-problem-base);
        }

        .report-button:hover {
            background-color: var(--color-problem-hover);
        }

        /* Brand color helpers for consistent reuse */
        .log-color-bg {
            background-color: var(--color-log-base);
        }

        .log-color-text {
            color: var(--color-log-base);
        }

        .problem-color-bg {
            background-color: var(--color-problem-base);
        }

        .problem-color-text {
            color: var(--color-problem-base);
        }

        .snippet-row {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            padding-top: 0.5rem;
            margin-top: 0.25rem;
            border-top: 1px solid var(--color-border-soft);
            font-size: 0.9rem;
            line-height: 1.3;
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            flex-wrap: nowrap;
            min-width: 0;
        }

        .snippet-label {
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .snippet-text {
            display: block;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            color: #6b7280;
            min-width: 0;
            max-width: 100%;
            flex: 1 1 auto;
        }

        .activity-card {
            min-width: 0;
            max-width: 100%;
            width: 100%;
        }

        /* Theme switcher */
        .theme-switcher {
            position: fixed;
            bottom: 1rem;
            left: 1rem;
            background: var(--color-surface);
            border: 1px solid var(--color-border-soft);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
            border-radius: 9999px;
            padding: 0.35rem 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            z-index: 40;
            font-size: 0.9rem;
        }

        .theme-switcher button {
            border: none;
            background: transparent;
            padding: 0.2rem 0.6rem;
            border-radius: 9999px;
            cursor: pointer;
            color: var(--color-text-dark);
            font-weight: 600;
            transition: background 0.15s ease, color 0.15s ease;
        }

        .theme-switcher button:hover {
            background: var(--color-border-soft);
        }

        .theme-switcher button.is-active {
            background: var(--color-accent-amber);
            color: #fff;
        }

        .logo-accent {
            color: var(--color-accent-amber);
        }

        .nav-active {
            color: var(--color-accent-amber);
            border-bottom: 2px solid var(--color-accent-amber);
        }

        .nav-link {
            color: var(--color-text-dark);
            border-bottom: 2px solid transparent;
        }

        .nav-link:hover {
            color: var(--color-accent-amber);
            border-bottom-color: var(--color-border-soft);
        }

        .brand-logo {
            height: 64px;
            width: auto;
            display: block;
        }

        .app-header {
            background: var(--color-surface);
            color: var(--color-text-dark);
        }

        .badge-warning {
            background: var(--color-warning-base);
            color: var(--color-warning-text);
            border: 1px solid var(--color-border-soft);
        }

        .accent-button {
            background-color: var(--color-accent-amber);
        }

        .accent-button:hover {
            background-color: #d97706;
        }

        .filter-active {
            background-color: var(--color-accent-amber);
            color: #fff;
        }

        .filter-active:hover {
            background-color: #d97706;
        }


        /* New Pill Styles (Standardized size/weight) */
        .pill-style {
            border-radius: 9999px;
            /* Fully rounded corners */
            padding: 0.4rem 1rem;
            font-weight: 600;
            /* Semi-bold */
            cursor: pointer;
            transition: all 0.15s ease-in-out;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            line-height: 1;
            /* Keep text centered */
        }

        /* Specific Status Pill - Fixing (Warning/Yellow) */
        .status-pill-fixing {
            background-color: #FEF3C7;
            /* Light Yellow */
            color: #B45309;
            /* Dark Amber */
            border: 1px solid #FCD34D;
            /* Medium Yellow */
        }

        .status-pill-fixing:hover {
            background-color: #FDEBBE;
            box-shadow: 0 2px 4px rgba(180, 83, 9, 0.2);
        }

        /* Specific Status Pill - Good (Operational/Green) */
        .status-pill-good {
            background-color: #D1FAE5;
            /* Light Green */
            color: #065F46;
            /* Dark Green */
            border: 1px solid #6EE7B7;
            /* Medium Green */
        }

        .status-pill-good:hover {
            background-color: #C0F5E1;
            box-shadow: 0 2px 4px rgba(6, 95, 70, 0.2);
        }

        /* === ENTRY CARD STYLES (Using centralized tokens) === */
        .log-entry-card {
            background-color: var(--color-log-light-bg);
            border: 1px solid var(--color-log-light-border);
        }

        .problem-entry-card {
            background-color: var(--color-problem-light-bg);
            border: 1px solid var(--color-problem-light-border);
        }

        /* === END ENTRY CARD STYLES === */


        .timeline-line {
            border-left: 2px solid var(--color-border-soft);
        }

        /* Z-Index Hierarchy (50 is highest) */
        .z-50 {
            z-index: 50;
        }

        .z-40 {
            z-index: 40;
        }

        .z-30 {
            z-index: 30;
        }

        /* Custom utility for title truncation */
        .truncate-text {
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }

        /* Main content needs padding for the fixed header */
        #main-content {
            padding-top: 5rem;
        }
    </style>
  </head>
  <body>
    <!-- === PERSISTENT SITE HEADER (MASTHEAD) === -->
    <header class="app-header fixed top-0 w-full border-b border-gray-200 z-30 p-3 shadow-sm flex justify-between items-center h-16">
      <!-- Logo/Brand Anchor --><a href="#" class="flex items-center gap-2 shrink-0">
      <img src="../../../the_flip/static/core/images/logo_blue.svg"
           data-logo-default="../../../the_flip/static/core/images/logo_blue.svg"
           data-logo-inverse="../../../the_flip/static/core/images/logo_white.svg"
           alt="The Flip"
           class="brand-logo">
    </a>
    <!-- Desktop/Tablet Navigation Links (Visible md and up) -->
    <nav class="hidden md:flex gap-4 text-base font-medium">
      <a href="#" class="px-3 py-1 font-bold nav-active">Machines</a>
      <a href="#" class="px-3 py-1 nav-link">Problem Reports</a>
      <a href="#" class="px-3 py-1 nav-link">Logs</a>
      <a href="#" class="px-3 py-1 nav-link text-gray-500">Admin</a>
    </nav>
    <!-- Account / Mobile Menu -->
    <div class="flex items-center gap-4 relative">
      <!-- Account Dropdown (Desktop Only) -->
      <div id="account-dropdown-toggle"
           class="hidden md:flex w-9 h-9 bg-amber-600 text-white rounded-full items-center justify-center font-bold text-sm cursor-pointer"
           onclick="toggleAccountMenu()">PW</div>
      <div id="account-menu"
           class="hidden absolute right-0 top-10 w-48 bg-white card-style p-3 shadow-xl text-base z-50">
        <p class="text-sm text-gray-500 mb-2">PinballWizard99</p>
        <a href="#" class="block p-2 hover:bg-gray-50 rounded-lg"><i class="fa-solid fa-gear mr-2"></i> Manage Account</a>
        <a href="#" class="block p-2 hover:bg-gray-50 rounded-lg text-red-600"><i class="fa-solid fa-right-from-bracket mr-2"></i> Logout</a>
      </div>
      <!-- Mobile Utility Menu Toggle (Only visible on mobile) -->
      <button class="md:hidden text-2xl text-gray-700" onclick="toggleMobileMenu()">
        <i class="fa-solid fa-bars"></i>
      </button>
    </div>
  </header>
  <!-- === MOBILE MENU DRAWER (Consolidated Navigation) === -->
  <div id="mobile-menu-drawer"
       class="fixed top-0 right-0 w-64 h-full bg-white shadow-xl pt-16 flex flex-col justify-between hidden md:hidden z-50">
    <!-- Top Section: Core Navigation -->
    <div class="px-4 space-y-1 text-base font-semibold overflow-y-auto pt-2">
      <!-- Core Navigation Links --><a href="#"
   class="block p-2 hover:bg-amber-50 rounded-lg text-amber-700"><i class="fa-solid fa-list mr-2"></i> Machines</a>
      <a href="#" class="block p-2 hover:bg-gray-50 rounded-lg text-gray-700"><i class="fa-solid fa-triangle-exclamation mr-2"></i> Problems</a>
      <a href="#" class="block p-2 hover:bg-gray-50 rounded-lg text-gray-700"><i class="fa-solid fa-screwdriver-wrench mr-2"></i> Global Logs</a>
      <a href="#" class="block p-2 hover:bg-gray-50 rounded-lg text-gray-500"><i class="fa-solid fa-users mr-2"></i> Admin Panel</a>
    </div>
    <!-- Bottom Section: Account Info & Logout -->
    <div class="px-4 py-3 border-t border-gray-200">
      <div class="card-style p-3 bg-gray-50 text-sm mb-3">
        <p class="font-bold">Logged in as:</p>
        <p class="text-gray-600">PinballWizard99</p>
      </div>
      <a href="#" class="block p-2 hover:bg-gray-50 rounded-lg text-gray-700"><i class="fa-solid fa-gear mr-2"></i> Account Settings</a>
      <a href="#"
         class="block p-2 hover:bg-gray-50 rounded-lg text-red-600 font-semibold"><i class="fa-solid fa-right-from-bracket mr-2"></i> Logout</a>
    </div>
    <button onclick="toggleMobileMenu()"
            class="text-gray-500 text-sm p-3 border-t hover:bg-gray-50">
      Close Menu <i class="fa-solid fa-xmark ml-1"></i>
    </button>
  </div>
  <!-- === OVERLAY (Hides main content when mobile menu is open) === -->
  <div id="overlay"
       class="fixed inset-0 hidden md:hidden bg-black opacity-30 z-40"
       onclick="toggleMobileMenu()"></div>
  <!-- === MAIN CONTENT === -->
  <main id="main-content" class="p-4 lg:p-8 max-w-5xl mx-auto relative">
    <!-- BREADCRUMBS -->
    <div class="text-gray-500 mb-4 flex items-center gap-2 text-sm lg:text-base">
      <a href="#" class="text-gray-500 hover:text-amber-600 transition">Machines</a>
      <span>/</span>
      <span class="font-semibold text-gray-700">The Addams Family</span>
    </div>
    <!-- MACHINE HEADER CARD -->
    <div class="card-style p-6 mb-8 relative">
      <!-- CONSOLIDATED HEADER ROW: Title Group (Left) vs. Pills/Action Group (Right) -->
      <div class="flex flex-col gap-4 mb-6">
        <!-- LEFT: Title Group + Edit Button -->
        <div class="min-w-0 flex-1 flex justify-between items-center gap-4">
          <!-- H1 Title: Entire phrase with truncation applied -->
          <h1 class="text-4xl lg:text-5xl font-extrabold text-gray-800 min-w-0 truncate-text flex-1">
            The Addams Family
            <!-- Subtitle is part of the flow for truncation --><span class="text-2xl lg:text-3xl font-semibold text-gray-500 ml-2">(Bally • 1992)</span>
          </h1>
          <!-- EDIT BUTTON (Shrink-0 to always be visible) -->
          <button class="button-style bg-gray-100 text-gray-700 px-3 py-1 text-base font-semibold border border-gray-300 hover:bg-gray-200 flex items-center gap-1 shrink-0">
            <i class="fa-solid fa-gear text-lg"></i>
            <span class="hidden sm:inline">Edit</span>
          </button>
        </div>
        <!-- RIGHT: Status Pills and Location -->
        <div class="flex flex-wrap items-center gap-3 shrink-0">
          <!-- Status Pill (Fixing) -->
          <button class="pill-style status-pill-fixing">
            <i class="fa-solid fa-wrench"></i>
            <span class="font-semibold">Fixing</span>
            <i class="fa-solid fa-caret-down text-xs ml-1"></i>
          </button>
          <!-- Location Pill -->
          <button class="pill-style bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200">
            <i class="fa-solid fa-location-dot"></i>
            <span class="font-semibold">Workshop</span>
            <i class="fa-solid fa-caret-down text-xs ml-1"></i>
          </button>
        </div>
      </div>
      <!-- END CONSOLIDATED HEADER ROW --><!-- PRIMARY ACTION BUTTONS (MODIFIED: Horizontal Layout) - Using new classes -->
      <div class="grid grid-cols-2 gap-4">
        <button class="button-style log-button text-white p-3 text-lg font-bold flex items-center justify-center shadow-lg">
          <i class="fa-solid fa-screwdriver-wrench text-xl mr-2"></i>
          Log Work
        </button>
        <button class="button-style report-button text-white p-3 text-lg font-bold flex items-center justify-center shadow-lg">
          <i class="fa-solid fa-bug text-xl mr-2"></i>
          Report Problem
        </button>
      </div>
      <!-- END MODIFIED BUTTONS -->
    </div>
    <!-- NEW FILTER AND SEARCH BAR (Activity/Logs/Problems now act as exclusive filters) -->
    <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8 border-b pb-4">
      <!-- 1. Primary Filters (Type) - Shrink on mobile but wrap if needed -->
      <div class="flex gap-2 overflow-x-auto pb-1 shrink-0">
        <!-- Filter Buttons (Smaller, pill-style for better integration with search) -->
        <button class="pill-style filter-active shadow-md px-4 py-2 text-sm font-semibold whitespace-nowrap transition">
          <i class="fa-solid fa-list"></i> All Activity
        </button>
        <button class="pill-style bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200 px-4 py-2 text-sm font-semibold whitespace-nowrap transition">
          <i class="fa-solid fa-screwdriver-wrench"></i> Logs Only
        </button>
        <button class="pill-style bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200 px-4 py-2 text-sm font-semibold whitespace-nowrap transition">
          <i class="fa-solid fa-bug"></i> Problems Only
        </button>
      </div>
      <!-- 2. Search Box (Takes remaining space, full width on mobile) -->
      <div class="relative flex-1 w-full min-w-0">
        <input type="search"
               placeholder="Search..."
               class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-amber-500 focus:border-amber-500 transition shadow-sm text-base"
               onkeydown="if(event.key === 'Enter') { console.log('Search submitted: ' + this.value); alert('Simulated Search for: ' + this.value); }">
        <i class="fa-solid fa-magnifying-glass absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
      </div>
    </div>
    <!-- ACTIVITY FEED (Timeline) -->
    <div class="relative pl-4 lg:pl-8">
      <!-- Timeline Line -->
      <div class="absolute left-6 lg:left-10 top-0 bottom-0 timeline-line w-1 z-0"></div>
      <!-- WORK LOG ENTRY against problem report -->
      <div class="relative z-10 mb-10">
        <div class="flex items-start gap-4">
          <div class="w-8 h-8 rounded-full flex items-center justify-center text-white text-sm shrink-0 mt-1 shadow-md border-2 border-white log-color-bg">
            <i class="fa-solid fa-screwdriver-wrench"></i>
          </div>
          <div class="card-style p-4 flex-1 log-entry-card activity-card">
            <div class="flex justify-between items-start mb-2">
              <div>
                <span class="font-bold text-lg log-color-text">Work</span>
              </div>
              <span class="text-gray-500 text-xs mt-1">PinballWizard99 • <span class="font-semibold">Just now</span></span>
            </div>
            <p class="mb-3 text-base text-gray-800">
              Replaced the coil on the upper right flipper. It was showing resistance issues. Test played one game, feels snappy now.
            </p>
            <div class="snippet-row">
              <span class="snippet-label problem-color-text"><i class="fa-solid fa-bug mr-1"></i>Problem report:</span>
              <span class="snippet-text">Top right flipper barely moves when I hit the button. Ball gets stuck.</span>
            </div>
          </div>
        </div>
      </div>
      <!-- WORK LOG ENTRY without problem report -->
      <div class="relative z-10 mb-10">
        <div class="flex items-start gap-4">
          <div class="w-8 h-8 rounded-full flex items-center justify-center text-white text-sm shrink-0 mt-1 shadow-md border-2 border-white log-color-bg">
            <i class="fa-solid fa-screwdriver-wrench"></i>
          </div>
          <div class="card-style p-4 flex-1 log-entry-card activity-card">
            <div class="flex justify-between items-start mb-2">
              <div>
                <span class="font-bold text-lg log-color-text">Work</span>
              </div>
              <span class="text-gray-500 text-xs mt-1">TechSam • <span class="font-semibold">20 mins ago</span></span>
            </div>
            <p class="mb-3 text-base text-gray-800">
              Cleaned optos and reseated connectors on the trough board. No faults observed after 10 test games.
            </p>
          </div>
        </div>
      </div>
      <!-- PROBLEM REPORT with latest log -->
      <div class="relative z-10 mb-10">
        <div class="flex items-start gap-4">
          <div class="w-8 h-8 rounded-full flex items-center justify-center text-white text-sm shrink-0 mt-1 shadow-md border-2 border-white problem-color-bg">
            <i class="fa-solid fa-bug"></i>
          </div>
          <div class="card-style p-4 flex-1 problem-entry-card activity-card">
            <div class="flex justify-between items-start mb-2">
              <div class="flex flex-col sm:flex-row sm:items-center gap-2">
                <span class="font-bold text-lg problem-color-text">Problem Report</span>
                <span class="px-2 py-0.5 text-xs font-bold rounded-md inline-block badge-warning">Open</span>
              </div>
              <span class="text-gray-500 text-xs mt-1">Visitor • <span class="font-semibold">Yesterday 10:15am</span></span>
            </div>
            <p class="mb-3 text-base text-gray-800">Top right flipper barely moves when I hit the button. Ball gets stuck.</p>
            <div class="snippet-row">
              <span class="snippet-label log-color-text"><i class="fa-solid fa-screwdriver-wrench mr-1"></i>Latest log:</span>
              <span class="snippet-text">Replaced the coil on the upper right flipper. It was showing resistance issues. Test played one game, feels snappy now.</span>
            </div>
          </div>
        </div>
      </div>
      <!-- PROBLEM REPORT without logs -->
      <div class="relative z-10 mb-10">
        <div class="flex items-start gap-4">
          <div class="w-8 h-8 rounded-full flex items-center justify-center text-white text-sm shrink-0 mt-1 shadow-md border-2 border-white problem-color-bg">
            <i class="fa-solid fa-bug"></i>
          </div>
          <div class="card-style p-4 flex-1 problem-entry-card activity-card">
            <div class="flex justify-between items-start mb-2">
              <div class="flex flex-col sm:flex-row sm:items-center gap-2">
                <span class="font-bold text-lg problem-color-text">Problem Report</span>
                <span class="text-white px-2 py-0.5 text-xs font-bold rounded-md inline-block bg-green-600">Closed</span>
              </div>
              <span class="text-gray-500 text-xs mt-1">LeaguePlayer • <span class="font-semibold">2 days ago</span></span>
            </div>
            <p class="mb-3 text-base text-gray-800">
              Left sling occasionally rapid-fires when the game is idle. Seems intermittent.
            </p>
          </div>
        </div>
      </div>
    </div>
  </main>
  <!-- Theme Switcher -->
  <div class="theme-switcher">
    <button data-theme="default" class="is-active">Theme 1</button>
    <button data-theme="slate">Theme 2</button>
    <button data-theme="forest">Theme 3</button>
    <button data-theme="midnight">Dark 1</button>
    <button data-theme="dark2">Dark 2</button>
    <button data-theme="dark3">Dark 3</button>
  </div>
  <!-- Javascript for Dropdowns and Mobile Drawer (Copied logic from previous versions) --><script>
        // Desktop Account Dropdown
        function toggleAccountMenu() {
            const menu = document.getElementById('account-menu');
            menu.classList.toggle('hidden');
        }

        // Mobile Menu Drawer
        function toggleMobileMenu() {
            const drawer = document.getElementById('mobile-menu-drawer');
            const overlay = document.getElementById('overlay');
            const body = document.body;

            // Toggle visibility classes (Hidden/Visible on mobile)
            if (window.innerWidth < 1024) {
                drawer.classList.toggle('hidden');
                overlay.classList.toggle('hidden');
            }

            // Toggle CSS transition classes
            body.classList.toggle('drawer-open');

             // Close the desktop dropdown if open
            document.getElementById('account-menu').classList.add('hidden');
        }

        // Close the menu if the user clicks the overlay or outside of the desktop dropdown
        document.addEventListener('click', function(event) {
            // Desktop Dropdown Close Logic
            const desktopMenu = document.getElementById('account-menu');
            const toggle = document.getElementById('account-dropdown-toggle');

            if (desktopMenu && toggle && window.innerWidth >= 1024) {
                const isClickInsideMenu = desktopMenu.contains(event.target);
                const isClickOnToggle = toggle.contains(event.target);

                if (!isClickInsideMenu && !isClickOnToggle) {
                    desktopMenu.classList.add('hidden');
                }
            }
        });

        // Ensure the drawer element is hidden when the screen size changes to desktop
        window.addEventListener('resize', () => {
            if (window.innerWidth >= 1024) {
                const drawer = document.getElementById('mobile-menu-drawer');
                const overlay = document.getElementById('overlay');
                document.body.classList.remove('drawer-open');
                drawer.classList.add('hidden');
                overlay.classList.add('hidden');
            } else {
                 // Ensure mobile elements are *not* hidden by default on mobile load
                const drawer = document.getElementById('mobile-menu-drawer');
                const overlay = document.getElementById('overlay');
                // Only reset hidden state if the drawer is not currently open
                if (!document.body.classList.contains('drawer-open')) {
                    drawer.classList.add('hidden');
                    overlay.classList.add('hidden');
                }
            }
        });

        // Theme switching
        (function() {
            const buttons = document.querySelectorAll('.theme-switcher button');
            const logo = document.querySelector('.brand-logo');
            const defaultTheme = 'default';

            function setTheme(theme) {
                document.body.setAttribute('data-theme', theme);
                buttons.forEach(btn => {
                    btn.classList.toggle('is-active', btn.dataset.theme === theme);
                });
                if (logo) {
                    if (theme === 'midnight' || theme === 'dark2') {
                        logo.src = logo.dataset.logoInverse || logo.src;
                    } else {
                        logo.src = logo.dataset.logoDefault || logo.src;
                    }
                }
            }

            buttons.forEach(btn => {
                btn.addEventListener('click', () => setTheme(btn.dataset.theme));
            });

            // Initialize
            setTheme(defaultTheme);
        })();
  </script>
</body>
</html>
