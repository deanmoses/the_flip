<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Flip - Visual Design v10 (Alt Horizontal Buttons)</title>
    <!-- Using Inter for high legibility, styled to feel warm/friendly -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap"
          rel="stylesheet">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="mock1-reset.css">
    <link rel="stylesheet" href="mock1-notailwind.css">
  </head>
  <body>
    <!-- === PERSISTENT SITE HEADER (MASTHEAD) === -->
    <header class="app-header masthead">
      <!-- Logo/Brand Anchor --><a href="#" class="brand-wrap">
      <img src="../../../the_flip/static/core/images/logo_blue.svg"
           data-logo-default="../../../the_flip/static/core/images/logo_blue.svg"
           data-logo-inverse="../../../the_flip/static/core/images/logo_white.svg"
           alt="The Flip"
           class="brand-logo">
    </a>
    <!-- Desktop/Tablet Navigation Links (Visible md and up) -->
    <nav class="main-nav">
      <a href="#" class="nav-link nav-active">Machines</a>
      <a href="#" class="nav-link">Problem Reports</a>
      <a href="#" class="nav-link">Logs</a>
      <a href="#" class="nav-link text-gray-500">Admin</a>
    </nav>
    <!-- Account / Mobile Menu -->
    <div class="account-area">
      <!-- Account Dropdown (Desktop Only) -->
      <div id="account-dropdown-toggle"
           class="avatar-toggle"
           onclick="toggleAccountMenu()">PW</div>
      <div id="account-menu" class="account-menu">
        <p class="text-sm text-gray-500 mb-2">PinballWizard99</p>
        <a href="#" class="block p-2 hover:bg-gray-50 rounded-lg"><i class="fa-solid fa-gear mr-2"></i> Manage Account</a>
        <a href="#" class="block p-2 hover:bg-gray-50 rounded-lg text-red-600"><i class="fa-solid fa-right-from-bracket mr-2"></i> Logout</a>
      </div>
      <!-- Mobile Utility Menu Toggle (Only visible on mobile) -->
      <button class="md-hidden text-2xl text-gray-700" onclick="toggleMobileMenu()">
        <i class="fa-solid fa-bars"></i>
      </button>
    </div>
  </header>
  <!-- === MOBILE MENU DRAWER (Consolidated Navigation) === -->
  <div id="mobile-menu-drawer" class="mobile-drawer hidden">
    <!-- Top Section: Core Navigation -->
    <div class="drawer-nav">
      <!-- Core Navigation Links --><a href="#"
   class="block p-2 hover:bg-amber-50 rounded-lg text-amber-700"><i class="fa-solid fa-list mr-2"></i> Machines</a>
      <a href="#" class="block p-2 hover:bg-gray-50 rounded-lg text-gray-700"><i class="fa-solid fa-triangle-exclamation mr-2"></i> Problems</a>
      <a href="#" class="block p-2 hover:bg-gray-50 rounded-lg text-gray-700"><i class="fa-solid fa-screwdriver-wrench mr-2"></i> Global Logs</a>
      <a href="#" class="block p-2 hover:bg-gray-50 rounded-lg text-gray-500"><i class="fa-solid fa-users mr-2"></i> Admin Panel</a>
    </div>
    <!-- Bottom Section: Account Info & Logout -->
    <div class="drawer-footer">
      <div class="card-style p-3 bg-gray-50 text-sm mb-3">
        <p class="font-bold">Logged in as:</p>
        <p class="text-gray-600">PinballWizard99</p>
      </div>
      <a href="#" class="block p-2 hover:bg-gray-50 rounded-lg text-gray-700"><i class="fa-solid fa-gear mr-2"></i> Account Settings</a>
      <a href="#"
         class="block p-2 hover:bg-gray-50 rounded-lg text-red-600 font-semibold"><i class="fa-solid fa-right-from-bracket mr-2"></i> Logout</a>
    </div>
    <button onclick="toggleMobileMenu()"
            class="text-gray-500 text-sm p-3 border-t hover:bg-gray-50">
      Close Menu <i class="fa-solid fa-xmark ml-1"></i>
    </button>
  </div>
  <!-- === OVERLAY (Hides main content when mobile menu is open) === -->
  <div id="overlay" class="overlay hidden" onclick="toggleMobileMenu()"></div>
  <!-- === MAIN CONTENT === -->
  <main id="main-content" class="page-shell">
    <!-- BREADCRUMBS -->
    <div class="breadcrumbs">
      <a href="#" class="text-gray-500 hover:text-amber-600 transition">Machines</a>
      <span>/</span>
      <span class="font-semibold text-gray-700">The Addams Family</span>
    </div>
    <!-- MACHINE HEADER CARD -->
    <div class="card-style p-6 mb-8 relative">
      <!-- CONSOLIDATED HEADER ROW: Title Group (Left) vs. Pills/Action Group (Right) -->
      <div class="header-block">
        <!-- LEFT: Title Group + Edit Button -->
        <div class="title-row">
          <!-- H1 Title: Entire phrase with truncation applied -->
          <h1 class="title-text truncate-text">
            The Addams Family
            <span class="subtitle">(Bally &bull; 1992)</span>
          </h1>
          <!-- EDIT BUTTON (Shrink-0 to always be visible) -->
          <button class="button-style edit-btn">
            <i class="fa-solid fa-gear text-lg"></i>
            <span class="hidden sm:inline">Edit</span>
          </button>
        </div>
        <!-- RIGHT: Status Pills and Location -->
        <div class="status-row">
          <!-- Status Pill (Fixing) -->
          <button class="pill-style status-pill-fixing">
            <i class="fa-solid fa-wrench"></i>
            <span class="font-semibold">Fixing</span>
            <i class="fa-solid fa-caret-down text-xs ml-1"></i>
          </button>
          <!-- Location Pill -->
          <button class="pill-style bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200">
            <i class="fa-solid fa-location-dot"></i>
            <span class="font-semibold">Workshop</span>
            <i class="fa-solid fa-caret-down text-xs ml-1"></i>
          </button>
        </div>
      </div>
      <!-- END CONSOLIDATED HEADER ROW --><!-- PRIMARY ACTION BUTTONS (MODIFIED: Horizontal Layout) - Using new classes -->
      <div class="primary-actions">
        <button class="button-style log-button text-white p-3 text-lg font-bold flex items-center justify-center shadow-lg">
          <i class="fa-solid fa-screwdriver-wrench text-xl mr-2"></i>
          Log Work
        </button>
        <button class="button-style report-button text-white p-3 text-lg font-bold flex items-center justify-center shadow-lg">
          <i class="fa-solid fa-bug text-xl mr-2"></i>
          Report Problem
        </button>
      </div>
      <!-- END MODIFIED BUTTONS -->
    </div>
    <!-- NEW FILTER AND SEARCH BAR (Activity/Logs/Problems now act as exclusive filters) -->
    <div class="filter-bar">
      <!-- 1. Primary Filters (Type) - Shrink on mobile but wrap if needed -->
      <div class="filters-row">
        <!-- Filter Buttons (Smaller, pill-style for better integration with search) -->
        <button class="pill-style filter-btn filter-active shadow-md">
          <i class="fa-solid fa-list"></i> All Activity
        </button>
        <button class="pill-style filter-btn bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200">
          <i class="fa-solid fa-screwdriver-wrench"></i> Logs Only
        </button>
        <button class="pill-style filter-btn bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200">
          <i class="fa-solid fa-bug"></i> Problems Only
        </button>
      </div>
      <!-- 2. Search Box (Takes remaining space, full width on mobile) -->
      <div class="search-wrap">
        <input type="search"
               placeholder="Search..."
               class="search-input"
               onkeydown="if(event.key === 'Enter') { console.log('Search submitted: ' + this.value); alert('Simulated Search for: ' + this.value); }">
        <i class="fa-solid fa-magnifying-glass search-icon"></i>
      </div>
    </div>
    <!-- ACTIVITY FEED (Timeline) -->
    <div class="relative pl-4 lg:pl-8">
      <!-- Timeline Line -->
      <div class="absolute left-6 lg:left-10 top-0 bottom-0 timeline-line w-1 z-0"></div>
      <!-- WORK LOG ENTRY against problem report -->
      <div class="relative z-10 mb-10">
        <div class="flex items-start gap-4">
          <div class="w-8 h-8 rounded-full flex items-center justify-center text-white text-sm shrink-0 mt-1 shadow-md border-2 border-white log-color-bg">
            <i class="fa-solid fa-screwdriver-wrench"></i>
          </div>
          <div class="card-style p-4 flex-1 log-entry-card activity-card">
            <div class="flex justify-between items-start mb-2">
              <div>
                <span class="font-bold text-lg log-color-text">Work</span>
              </div>
              <span class="text-gray-500 text-xs mt-1">PinballWizard99 &bull; <span class="font-semibold">Just now</span></span>
            </div>
            <p class="mb-3 text-base text-gray-800">
              Replaced the coil on the upper right flipper. It was showing resistance issues. Test played one game, feels snappy now.
            </p>
            <div class="snippet-row">
              <span class="snippet-label problem-color-text"><i class="fa-solid fa-bug mr-1"></i>Problem report:</span>
              <span class="snippet-text">Top right flipper barely moves when I hit the button. Ball gets stuck.</span>
            </div>
          </div>
        </div>
      </div>
      <!-- WORK LOG ENTRY without problem report -->
      <div class="relative z-10 mb-10">
        <div class="flex items-start gap-4">
          <div class="w-8 h-8 rounded-full flex items-center justify-center text-white text-sm shrink-0 mt-1 shadow-md border-2 border-white log-color-bg">
            <i class="fa-solid fa-screwdriver-wrench"></i>
          </div>
          <div class="card-style p-4 flex-1 log-entry-card activity-card">
            <div class="flex justify-between items-start mb-2">
              <div>
                <span class="font-bold text-lg log-color-text">Work</span>
              </div>
              <span class="text-gray-500 text-xs mt-1">TechSam &bull; <span class="font-semibold">20 mins ago</span></span>
            </div>
            <p class="mb-3 text-base text-gray-800">
              Cleaned optos and reseated connectors on the trough board. No faults observed after 10 test games.
            </p>
          </div>
        </div>
      </div>
      <!-- PROBLEM REPORT with latest log -->
      <div class="relative z-10 mb-10">
        <div class="flex items-start gap-4">
          <div class="w-8 h-8 rounded-full flex items-center justify-center text-white text-sm shrink-0 mt-1 shadow-md border-2 border-white problem-color-bg">
            <i class="fa-solid fa-bug"></i>
          </div>
          <div class="card-style p-4 flex-1 problem-entry-card activity-card">
            <div class="flex justify-between items-start mb-2">
              <div class="flex flex-col sm:flex-row sm:items-center gap-2">
                <span class="font-bold text-lg problem-color-text">Problem Report</span>
                <span class="px-2 py-0.5 text-xs font-bold rounded-md inline-block badge-warning">Open</span>
              </div>
              <span class="text-gray-500 text-xs mt-1">Visitor &bull; <span class="font-semibold">Yesterday 10:15am</span></span>
            </div>
            <p class="mb-3 text-base text-gray-800">Top right flipper barely moves when I hit the button. Ball gets stuck.</p>
            <div class="snippet-row">
              <span class="snippet-label log-color-text"><i class="fa-solid fa-screwdriver-wrench mr-1"></i>Latest log:</span>
              <span class="snippet-text">Replaced the coil on the upper right flipper. It was showing resistance issues. Test played one game, feels snappy now.</span>
            </div>
          </div>
        </div>
      </div>
      <!-- PROBLEM REPORT without logs -->
      <div class="relative z-10 mb-10">
        <div class="flex items-start gap-4">
          <div class="w-8 h-8 rounded-full flex items-center justify-center text-white text-sm shrink-0 mt-1 shadow-md border-2 border-white problem-color-bg">
            <i class="fa-solid fa-bug"></i>
          </div>
          <div class="card-style p-4 flex-1 problem-entry-card activity-card">
            <div class="flex justify-between items-start mb-2">
              <div class="flex flex-col sm:flex-row sm:items-center gap-2">
                <span class="font-bold text-lg problem-color-text">Problem Report</span>
                <span class="text-white px-2 py-0.5 text-xs font-bold rounded-md inline-block bg-green-600">Closed</span>
              </div>
              <span class="text-gray-500 text-xs mt-1">LeaguePlayer &bull; <span class="font-semibold">2 days ago</span></span>
            </div>
            <p class="mb-3 text-base text-gray-800">
              Left sling occasionally rapid-fires when the game is idle. Seems intermittent.
            </p>
          </div>
        </div>
      </div>
    </div>
  </main>
  <!-- Theme Switcher -->
  <div class="theme-switcher">
    <button data-theme="default" class="is-active">Theme 1</button>
    <button data-theme="slate">Theme 2</button>
    <button data-theme="forest">Theme 3</button>
    <button data-theme="midnight">Dark 1</button>
    <button data-theme="dark2">Dark 2</button>
    <button data-theme="dark3">Dark 3</button>
  </div>
  <!-- Javascript for Dropdowns and Mobile Drawer (Copied logic from previous versions) --><script>
        // Desktop Account Dropdown
        function toggleAccountMenu() {
            const menu = document.getElementById('account-menu');
            menu.classList.toggle('hidden');
        }

        // Mobile Menu Drawer
        function toggleMobileMenu() {
            const drawer = document.getElementById('mobile-menu-drawer');
            const overlay = document.getElementById('overlay');
            const body = document.body;

            // Toggle visibility classes (Hidden/Visible on mobile)
            if (window.innerWidth < 1024) {
                drawer.classList.toggle('hidden');
                overlay.classList.toggle('hidden');
            }

            // Toggle CSS transition classes
            body.classList.toggle('drawer-open');

             // Close the desktop dropdown if open
            document.getElementById('account-menu').classList.add('hidden');
        }

        // Close the menu if the user clicks the overlay or outside of the desktop dropdown
        document.addEventListener('click', function(event) {
            // Desktop Dropdown Close Logic
            const desktopMenu = document.getElementById('account-menu');
            const toggle = document.getElementById('account-dropdown-toggle');

            if (desktopMenu && toggle && window.innerWidth >= 1024) {
                const isClickInsideMenu = desktopMenu.contains(event.target);
                const isClickOnToggle = toggle.contains(event.target);

                if (!isClickInsideMenu && !isClickOnToggle) {
                    desktopMenu.classList.add('hidden');
                }
            }
        });

        // Ensure the drawer element is hidden when the screen size changes to desktop
        window.addEventListener('resize', () => {
            if (window.innerWidth >= 1024) {
                const drawer = document.getElementById('mobile-menu-drawer');
                const overlay = document.getElementById('overlay');
                document.body.classList.remove('drawer-open');
                drawer.classList.add('hidden');
                overlay.classList.add('hidden');
            } else {
                 // Ensure mobile elements are *not* hidden by default on mobile load
                const drawer = document.getElementById('mobile-menu-drawer');
                const overlay = document.getElementById('overlay');
                // Only reset hidden state if the drawer is not currently open
                if (!document.body.classList.contains('drawer-open')) {
                    drawer.classList.add('hidden');
                    overlay.classList.add('hidden');
                }
            }
        });

        // Theme switching
        (function() {
            const buttons = document.querySelectorAll('.theme-switcher button');
            const logo = document.querySelector('.brand-logo');
            const defaultTheme = 'default';

            function setTheme(theme) {
                document.body.setAttribute('data-theme', theme);
                buttons.forEach(btn => {
                    btn.classList.toggle('is-active', btn.dataset.theme === theme);
                });
                if (logo) {
                    if (theme === 'midnight' || theme === 'dark2') {
                        logo.src = logo.dataset.logoInverse || logo.src;
                    } else {
                        logo.src = logo.dataset.logoDefault || logo.src;
                    }
                }
            }

            buttons.forEach(btn => {
                btn.addEventListener('click', () => setTheme(btn.dataset.theme));
            });

            // Initialize
            setTheme(defaultTheme);
        })();
  </script>
</body>
</html>
