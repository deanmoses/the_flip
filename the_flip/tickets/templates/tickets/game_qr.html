{% extends 'tickets/base.html' %}

{% block title %}QR Code - {{ game.name }} - The Flip{% endblock %}

{% block content %}
<style>
    @media print {
        .navbar, .footer, .no-print {
            display: none !important;
        }

        body {
            background: white;
        }

        .main-content {
            padding: 0;
        }

        .container {
            max-width: 100%;
        }

        .qr-page-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 40px;
        }

        .qr-code-display img {
            max-width: 500px;
            width: 100%;
        }
    }

    .qr-page-container {
        max-width: 700px;
        margin: 0 auto;
        padding: 40px 20px;
    }

    .breadcrumb {
        font-size: 0.9em;
        color: #666;
        margin-bottom: 20px;
    }

    .breadcrumb a {
        color: #2196F3;
        text-decoration: none;
    }

    .breadcrumb a:hover {
        text-decoration: underline;
    }

    .breadcrumb-separator {
        margin: 0 8px;
        color: #999;
    }

    .page-header {
        margin-bottom: 40px;
        text-align: center;
    }

    .page-header h1 {
        font-size: 2em;
        margin-bottom: 10px;
        color: #2c3e50;
    }

    .page-header .game-meta {
        color: #666;
        font-size: 1.1em;
    }

    .qr-code-display {
        background: white;
        border: 2px solid #ddd;
        border-radius: 8px;
        padding: 40px;
        margin-bottom: 30px;
        text-align: center;
    }

    .qr-code-display h2 {
        margin-bottom: 20px;
        color: #333;
        font-size: 1.3em;
    }

    .qr-code-display img {
        max-width: 400px;
        width: 100%;
        border: 1px solid #ddd;
        padding: 15px;
        background: white;
    }

    .qr-url {
        margin-top: 30px;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 4px;
        word-break: break-all;
        font-family: monospace;
        font-size: 0.9em;
        text-align: center;
    }

    .print-instructions {
        padding: 20px;
        background: #e7f3ff;
        border-left: 4px solid #2196F3;
        border-radius: 4px;
        margin-bottom: 30px;
    }

    .print-instructions h3 {
        margin-top: 0;
        margin-bottom: 10px;
        color: #1976D2;
    }

    .action-buttons {
        display: flex;
        gap: 10px;
        justify-content: center;
        margin-top: 30px;
    }

    .btn {
        padding: 12px 30px;
        font-size: 1em;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        text-decoration: none;
        display: inline-block;
    }

    .btn-primary {
        background: #2196F3;
        color: white;
    }

    .btn-primary:hover {
        background: #1976D2;
    }

    .btn-secondary {
        background: #6c757d;
        color: white;
    }

    .btn-secondary:hover {
        background: #5a6268;
    }
</style>

<div class="qr-page-container">
    <nav class="breadcrumb no-print">
        <a href="{% url 'game_list' %}">Games</a>
        <span class="breadcrumb-separator">›</span>
        <a href="{% url 'game_detail' game.pk %}">{{ game.name }}</a>
        <span class="breadcrumb-separator">›</span>
        <span>QR Code</span>
    </nav>

    <div class="print-instructions no-print">
        <p>Attach this QR code to the game so visitors can scan and report problems on their phones.</p>
    </div>

    <div class="qr-code-display">
        <h2>Scan to Report a Problem</h2>
        <img src="data:image/png;base64,{{ qr_code_data }}" alt="QR Code for {{ game.name }}">
    </div>

    <div class="qr-url">
        <strong>URL:</strong> <a href="{{ qr_url }}" target="_blank">{{ qr_url }}</a>
    </div>

    <div class="action-buttons no-print">
        <button onclick="window.print()" class="btn btn-primary">Print QR Code</button>
    </div>
</div>
{% endblock %}
