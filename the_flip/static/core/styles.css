/* ==========================================================================
   CSS Variables & Tokens
   ========================================================================== */
:root {
  --font-family: "Inter", "Segoe UI", "Helvetica Neue", Arial, sans-serif;
  --color-primary: #1f7aea;
  --color-secondary: #0f1f34;
  --color-accent: #10b981;
  --color-warning: #f59e0b;
  --color-danger: #ef4444;
  --color-surface: #ffffff;
  --color-card: var(--color-surface);
  --color-surface-muted: #f5f7fb;
  --color-surface-text-muted: rgba(255, 255, 255, 0.7);
  --color-border: #e3e8ef;
  --color-text: #1f2933;
  --color-text-muted: #52606d;
  --weight-regular: 400;
  --weight-medium: 500;
  --weight-semibold: 600;
  --weight-bold: 700;
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --radius-base: 4px;
  --radius-card: 8px;
  --shadow-card: 0 8px 20px rgba(15, 23, 42, 0.08);
}

/* ==========================================================================
   Base Reset & Typography
   ========================================================================== */
*,
*::before,
*::after {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: var(--font-family);
  color: var(--color-text);
  background: var(--color-surface-muted);
  line-height: 1.6;
}

a {
  color: var(--color-primary);
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

/* ==========================================================================
   Layout Components
   ========================================================================== */
header {
  background: var(--color-secondary);
  color: var(--color-surface);
  padding: var(--space-1) var(--space-4) 0;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-4);
  flex-wrap: wrap;
}

header h1 {
  margin: 0;
  font-size: 1.5rem;
  color: var(--color-surface);
}

.header-logo {
  height: 4rem;
  width: auto;
}

header nav {
  display: flex;
  gap: var(--space-3);
}

header a {
  color: #ffffff;
  font-weight: var(--weight-bold);
  text-decoration: none;
}

header a:hover {
  text-decoration: underline;
}

header nav span {
  color: rgba(255, 255, 255, 0.7);
  font-weight: var(--weight-regular);
}

/* ==========================================================================
   User Menu (avatar dropdown in header)
   Base: .user-menu
   BEM Elements: .user-menu__avatar, .user-menu__dropdown, .user-menu__item
   ========================================================================== */
.user-menu {
  position: relative;
}

.user-menu__avatar {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: var(--color-primary);
  color: var(--color-surface);
  font-weight: var(--weight-bold);
  font-size: 0.75rem;
  text-transform: uppercase;
  border: none;
  cursor: pointer;
  font-family: inherit;
  transition: background 0.2s ease;
}

.user-menu__avatar:hover,
.user-menu__avatar:focus-visible {
  background: #1a66c0;
}

.user-menu__avatar:focus-visible {
  outline: 2px solid var(--color-surface);
  outline-offset: 2px;
}

.user-menu__dropdown {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: var(--space-2);
  background: var(--color-surface);
  border-radius: var(--radius-base);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  min-width: 120px;
  opacity: 0;
  visibility: hidden;
  transform: translateY(-4px);
  transition: opacity 0.15s ease, transform 0.15s ease, visibility 0.15s;
  z-index: 100;
}

.user-menu:hover .user-menu__dropdown,
.user-menu:focus-within .user-menu__dropdown {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

.user-menu__item {
  display: block;
  width: 100%;
  padding: var(--space-2) var(--space-3);
  color: var(--color-text);
  text-decoration: none;
  font-size: 0.9rem;
  font-weight: var(--weight-medium);
  text-align: left;
  background: none;
  border: none;
  cursor: pointer;
  font-family: inherit;
  transition: background 0.15s ease;
}

.user-menu__item:hover,
.user-menu__item:focus-visible {
  background: var(--color-surface-muted);
  text-decoration: none;
}

.user-menu__item:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: -2px;
}

.user-menu__dropdown form {
  margin: 0;
}

@media (prefers-reduced-motion: reduce) {
  .user-menu__dropdown {
    transition: none;
  }

  .user-menu__avatar {
    transition: none;
  }

  .user-menu__item {
    transition: none;
  }
}

main {
  max-width: 960px;
  margin: 0 auto;
  padding: var(--space-5) var(--space-4);
}

/* ==========================================================================
   Cards
   Base: .card (no BEM elements currently defined)
   ========================================================================== */
.card {
  background: var(--color-surface);
  border-radius: var(--radius-card);
  padding: var(--space-5);
  box-shadow: var(--shadow-card);
  margin-bottom: var(--space-4);
}

.card h3 {
  margin-top: 0;
}

/* ==========================================================================
   Flip Cards
   Base: .flip-card
   Elements: .flip-card__top, .flip-card__main, .flip-card__bottom,
             .flip-card__top-left, .flip-card__top-right,
             .flip-card__bottom-left, .flip-card__bottom-right
   Modifiers / helpers: .flip-card--clickable, .flip-card-list
   Usage: use .flip-card (and .flip-card-list) for list-style or interactive cards with
          top/main/bottom regions; keep .card for simple, static content containers.
   ========================================================================== */
.flip-card-list {
  list-style: none;
  margin: 0;
  padding: 0;
}

.flip-card-list > li {
  margin: 0;
}

.flip-card {
  background: var(--color-card);
  border-radius: var(--radius-card);
  padding: var(--space-3) var(--space-5) var(--space-3);
  box-shadow: var(--shadow-card);
  margin-bottom: var(--space-4);
}

.flip-card--clickable {
  display: block;
  color: inherit;
  text-decoration: none;
  cursor: pointer;
  transition: box-shadow 0.2s ease, transform 0.2s ease;
}

.flip-card--clickable:hover {
  box-shadow: 0 8px 24px rgba(15, 23, 42, 0.16);
  transform: translateY(-1px);
  text-decoration: none;
}

.flip-card--clickable:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

.flip-card__top,
.flip-card__bottom {
  display: flex;
  align-items: flex-start;
  gap: var(--space-3);
}

.flip-card__top {
  margin-bottom: var(--space-3);
}

.flip-card__main {
  margin-bottom: 0;
}

.flip-card__main > *:first-child {
  margin-top: 0;
}

.flip-card__main > * {
  margin-bottom: var(--space-2);
}

.flip-card__main > *:last-child {
  margin-bottom: 0;
}

.flip-card__bottom {
  margin-top: var(--space-4);
}

.flip-card__top-right,
.flip-card__bottom-right {
  margin-left: auto;
  text-align: right;
}

/* Flip card text helpers */
.flip-card__title {
  font-weight: var(--weight-semibold);
  display: -webkit-box;
  -webkit-box-orient: vertical;
  overflow: hidden;
  -webkit-line-clamp: 1;
  line-clamp: 1;
}

.flip-card__summary {
  font-size: 0.95rem;
  color: var(--color-text);
  display: -webkit-box;
  -webkit-box-orient: vertical;
  overflow: hidden;
  -webkit-line-clamp: 1;
  line-clamp: 1;
}

.flip-card__snippet {
  max-width: clamp(38ch, 80vw, 64ch);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ==========================================================================
   Buttons
   Base: .btn
   Modifiers: .btn-primary, .btn-secondary
   ========================================================================== */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-base);
  padding: var(--space-2) var(--space-4);
  font-family: inherit;
  font-size: 1rem;
  font-weight: var(--weight-semibold);
  line-height: 1.2;
  border: 2px solid transparent;
  cursor: pointer;
  transition: background 0.2s ease, color 0.2s ease;
}

.btn-primary {
  background: var(--color-primary);
  color: var(--color-surface);
  border-color: transparent;
}

.btn-primary:hover {
  background: #1a66c0;
}

.btn-secondary {
  background: transparent;
  border-color: var(--color-primary);
  color: var(--color-primary);
}

.btn-secondary:hover {
  background: var(--color-primary);
  color: var(--color-surface);
}

/* ==========================================================================
   Forms
   Base: .form-field
   ========================================================================== */
.form-field {
  margin-bottom: var(--space-4);
}

.form-field label {
  display: block;
  font-weight: var(--weight-semibold);
  margin-bottom: var(--space-2);
}

/* Form layout helpers */
.form-container {
  max-width: clamp(320px, 90vw, 640px);
  margin: 0 auto var(--space-5);
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

.form-section {
  margin: 0 0 var(--space-5) 0;
}

.form-actions {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
  align-items: center;
  margin-top: var(--space-3);
}

.form-errors {
  margin: 0 0 var(--space-3) 0;
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-base);
  background: var(--color-surface-muted);
  border: 1px solid var(--color-border);
  color: var(--color-danger);
}

.help-text {
  display: block;
  margin-top: var(--space-1);
  color: var(--color-text-muted);
  font-size: 0.9rem;
}

fieldset {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-card);
  padding: var(--space-5);
  margin-bottom: var(--space-5);
}

legend {
  padding: 0 var(--space-3);
  font-size: 1.1rem;
  font-weight: var(--weight-semibold);
  color: var(--color-text);
}

input[type="text"],
input[type="email"],
input[type="password"],
input[type="search"],
input[type="date"],
input[type="datetime-local"],
textarea,
select {
  width: 100%;
  border: 1px solid var(--color-border);
  border-radius: 6px;
  padding: var(--space-2);
  font-family: inherit;
  font-size: 1rem;
}

input.search-input {
  width: 22ch;
}

input:focus,
textarea:focus,
select:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(31, 122, 234, 0.25);
  border-color: var(--color-primary);
}

input[type="file"] {
  font-family: inherit;
  font-size: 1rem;
}

input[type="file"]::file-selector-button {
  background: var(--color-primary);
  color: var(--color-surface);
  border: none;
  border-radius: var(--radius-base);
  padding: var(--space-2) var(--space-3);
  font-weight: var(--weight-semibold);
  cursor: pointer;
  margin-right: var(--space-3);
}

input[type="file"]::file-selector-button:hover {
  background: #1a66c0;
}

/* Safari/older WebKit fallback */
input[type="file"]::-webkit-file-upload-button {
  background: var(--color-primary);
  color: var(--color-surface);
  border: none;
  border-radius: var(--radius-base);
  padding: var(--space-2) var(--space-3);
  font-weight: var(--weight-semibold);
  cursor: pointer;
  margin-right: var(--space-3);
}

input[type="file"]::-webkit-file-upload-button:hover {
  background: #1a66c0;
}

textarea {
  resize: vertical;
}

/* Radio buttons */
input[type="radio"] {
  width: auto;
  margin: 0;
  cursor: pointer;
}

.form-field ul {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

.form-field ul li {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.form-field ul li label {
  margin: 0;
  font-weight: var(--weight-regular);
  cursor: pointer;
}

/* ==========================================================================
   Badges / tags (pill-shaped status indicators)
   Base: .badge
   Modifiers: .badge-good, .badge-broken, .badge-fixing, etc.
   Utilities: .badge-right (align right in flex containers)
   ========================================================================== */
.badge {
  display: inline-flex;
  align-items: center;
  padding: 0 var(--space-2);
  height: 22px;
  border-radius: 999px;
  font-size: 0.8rem;
  font-weight: var(--weight-semibold);
  background: var(--color-border);
  color: var(--color-text);
}

/* Badge status variants */
.badge-good {
  background: var(--color-accent);
  color: #fff;
}

.badge-unknown {
  background: var(--color-border);
  color: var(--color-text);
}

.badge-fixing {
  background: var(--color-warning);
  color: #1f1f1f;
}

.badge-broken {
  background: var(--color-danger);
  color: #fff;
}

.badge-open {
  background: var(--color-danger);
  color: #fff;
}

.badge-closed {
  background: var(--color-accent);
  color: #fff;
}

.badge-problem-report {
  background: var(--color-border);
  color: var(--color-text);
}

/* ==========================================================================
   Lists
   ========================================================================== */
.list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.list > li {
  padding: var(--space-4);
  background: var(--color-surface);
  border-radius: var(--radius-card);
  box-shadow: var(--shadow-card);
  margin-bottom: var(--space-4);
}

/* ==========================================================================
   Terminal Cards (for shared terminal management)
   Base: .terminal-card
   BEM Elements: .terminal-card__info, .terminal-card__name, .terminal-card__actions
   ========================================================================== */
.terminal-card {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--space-3);
  flex-wrap: wrap;
}

.terminal-card__info {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.terminal-card__name {
  font-weight: var(--weight-semibold);
}

.terminal-card__actions {
  display: flex;
  gap: var(--space-2);
  align-items: center;
}

.terminal-card__actions form {
  margin: 0;
}

/* ==========================================================================
   Section Headers & Page Layout
   ========================================================================== */
.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--space-3);
  margin-bottom: var(--space-4);
  flex-wrap: wrap;
}

.section-header h2 {
  margin: 0;
}

.section-header__actions {
  display: flex;
  gap: var(--space-2);
  margin-left: auto;
}

/* ==========================================================================
   Log Entries
   ========================================================================== */
.log-entry-link {
  display: block;
  color: inherit;
  text-decoration: none;
  transition: opacity 0.2s ease;
}

.log-entry-link:hover {
  opacity: 0.8;
  text-decoration: none;
}

.log-entry-meta {
  font-size: 0.9rem;
  color: var(--color-text-muted);
}

.log-entry-text {
  margin-top: var(--space-2);
  font-size: 1rem;
  white-space: normal;
}

.log-entry-media img {
  border-radius: var(--radius-base);
  margin-top: var(--space-2);
  max-width: 100%;
  height: auto;
}

/* ==========================================================================
   Autocomplete
   Base: .autocomplete
   BEM Elements: .autocomplete__dropdown, .autocomplete__item
   ========================================================================== */
.autocomplete {
  position: relative;
}

.autocomplete__dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  max-height: 360px;
  overflow-y: auto;
  z-index: 100;
  margin-top: 2px;
}

.autocomplete__item {
  padding: var(--space-2) var(--space-3);
  cursor: pointer;
  font-size: 1rem;
}

.autocomplete__item:hover,
.autocomplete__item-active {
  background: var(--color-surface-muted);
}

.autocomplete__item:first-child {
  border-radius: var(--radius-base) var(--radius-base) 0 0;
}

.autocomplete__item:last-child {
  border-radius: 0 0 var(--radius-base) var(--radius-base);
}

/* ==========================================================================
   Form Utilities & Helpers
   ========================================================================== */
.error,
.field-error {
  color: var(--color-danger);
  font-size: 0.9rem;
}

/* ==========================================================================
   Pagination
   ========================================================================== */
.pagination {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  margin-top: var(--space-4);
}

.pagination a {
  color: var(--color-primary);
  font-weight: var(--weight-semibold);
}

/* ==========================================================================
   Page Header & List Header
   Flex containers for left/right content layout.
   - .page-header: Top of page (breadcrumbs, titles, primary actions)
   - .list-header: Above lists (search, filters, list-specific actions)
   ========================================================================== */
.page-header,
.list-header {
  display: flex;
  align-items: center;
  gap: var(--space-4);
}

.page-header {
  margin-bottom: var(--space-6);
}

.list-header {
  margin-bottom: var(--space-4);
}

.page-header__left,
.list-header__left {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.breadcrumb {
  font-size: 0.9rem;
  color: var(--color-text-muted);
  white-space: nowrap;
}

.page-header__right,
.list-header__right {
  display: flex;
  gap: var(--space-2);
  margin-left: auto;
  white-space: nowrap;
}

.list-header .form-field {
  margin-bottom: 0;
}

/* ==========================================================================
   Utility Classes
   ========================================================================== */
.hidden {
  display: none;
}

.text-muted {
  color: var(--color-text-muted);
}

/* Display utilities */
.form-inline {
  display: inline;
}

/* Spacing utilities */
.badge-inline {
  margin-left: var(--space-2);
}

/* Media thumbnail spacing (for inline image lists) */
.media-thumbnail {
  margin-right: var(--space-2);
  border-radius: var(--radius-base);
}

.subtitle {
  font-size: 1.1rem;
  margin-top: calc(var(--space-2) * -1);
  margin-bottom: var(--space-5);
}

.educational-text {
  margin: var(--space-5) 0;
  line-height: 1.7;
}

.centered {
  text-align: center;
}

#log-loading {
  margin-top: var(--space-3);
  color: var(--color-text-muted);
}

/* ==========================================================================
   Markdown Content
   Styling for rendered markdown text
   ========================================================================== */
.markdown-content {
  line-height: 1.6;
}

.markdown-content p {
  margin: 0 0 var(--space-3) 0;
}

.markdown-content p:last-child {
  margin-bottom: 0;
}

.markdown-content ul,
.markdown-content ol {
  margin: 0 0 var(--space-3) 0;
  padding-left: var(--space-5);
}

.markdown-content li {
  margin-bottom: var(--space-1);
}

.markdown-content code {
  background: var(--color-surface);
  padding: 0.125em 0.375em;
  border-radius: 3px;
  font-size: 0.9em;
}

.markdown-content pre {
  background: var(--color-surface);
  padding: var(--space-3);
  border-radius: var(--radius);
  overflow-x: auto;
  margin: 0 0 var(--space-3) 0;
}

.markdown-content pre code {
  background: none;
  padding: 0;
}

.markdown-content blockquote {
  border-left: 3px solid var(--color-border);
  margin: 0 0 var(--space-3) 0;
  padding-left: var(--space-3);
  color: var(--color-text-muted);
}

.markdown-content h1,
.markdown-content h2,
.markdown-content h3,
.markdown-content h4,
.markdown-content h5,
.markdown-content h6 {
  margin: var(--space-4) 0 var(--space-2) 0;
  line-height: 1.3;
}

.markdown-content h1:first-child,
.markdown-content h2:first-child,
.markdown-content h3:first-child,
.markdown-content h4:first-child,
.markdown-content h5:first-child,
.markdown-content h6:first-child {
  margin-top: 0;
}

.markdown-content--compact p,
.markdown-content--compact ul,
.markdown-content--compact ol {
  margin: 0 0 var(--space-2) 0;
}

.markdown-content--compact li {
  margin-bottom: 0;
}

/* ==========================================================================
   Messages & Alerts
   Base: .message
   Modifiers: .message--success, .message--error, .message--warning, .message--info
   ========================================================================== */
.messages {
  margin-bottom: var(--space-5);
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

.message {
  display: block;
  padding: var(--space-4);
  border-radius: var(--radius-card);
  border-left: 4px solid;
  background: var(--color-surface);
  box-shadow: 0 2px 8px rgba(15, 23, 42, 0.08);
  font-size: 1rem;
  line-height: 1.5;
}

.message::before {
  content: '';
  font-size: 1.25rem;
  font-weight: var(--weight-bold);
  display: inline-block;
  margin-right: var(--space-3);
}

.message--success {
  border-left-color: var(--color-accent);
  color: var(--color-text);
}

.message--success::before {
  content: '✓';
  color: var(--color-accent);
}

.message--error {
  border-left-color: var(--color-danger);
  color: var(--color-text);
}

.message--error::before {
  content: '✕';
  color: var(--color-danger);
}

.message--warning {
  border-left-color: var(--color-warning);
  color: var(--color-text);
}

.message--warning::before {
  content: '⚠';
  color: var(--color-warning);
}

.message--info {
  border-left-color: var(--color-primary);
  color: var(--color-text);
}

.message--info::before {
  content: 'ℹ';
  color: var(--color-primary);
}

.message a {
  display: inline;
  padding: 0;
  margin: 0;
}

/* ==========================================================================
   Minimal Header & Footer (for public QR pages)
   ========================================================================== */
.header-minimal {
  background: var(--color-secondary);
  color: var(--color-surface);
  padding: var(--space-1) var(--space-4) 0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.header-minimal__content {
  max-width: 960px;
  margin: 0 auto;
}

.header-minimal h1 {
  margin: 0;
  font-size: 1.25rem;
  color: var(--color-surface-text-muted);
  font-weight: var(--weight-bold);
}

.footer-minimal {
  background: var(--color-secondary);
  color: var(--color-surface);
  padding: var(--space-3) var(--space-4);
  margin-top: var(--space-6);
  text-align: center;
}

.footer-minimal__content {
  max-width: 960px;
  margin: 0 auto;
}

.footer-minimal p {
  margin: 0;
  font-size: 0.875rem;
  color: var(--color-surface-text-muted);
}

/* ==========================================================================
   Inline Edit (for status/location dropdowns on machine detail)
   Base: .inline-edit-group
   BEM Elements: .inline-edit-field, .inline-edit-select
   ========================================================================== */
.inline-edit-group {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-4);
  margin: 0;
}

.inline-edit-group:last-child {
  margin-bottom: 0;
}

.inline-edit-field {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  margin-bottom: 0;
}

.inline-edit-field label {
  display: inline-block;
  font-weight: var(--weight-semibold);
  margin: 0;
  white-space: nowrap;
}

.inline-edit-select {
  padding: var(--space-1) var(--space-2);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  font-size: 0.95rem;
  min-width: 120px;
}

/* ==========================================================================
   Status Indicator (for async save feedback)
   Base: .status-indicator
   Modifiers: .status-indicator.saving, .status-indicator.saved, .status-indicator.error
   ========================================================================== */
.status-indicator {
  font-size: 0.875rem;
  white-space: nowrap;
}

.status-indicator.saving {
  color: var(--color-text-muted);
}

.status-indicator.saved {
  color: var(--color-accent);
}

.status-indicator.error {
  color: var(--color-danger);
}

.entry-text-container {
  margin-bottom: var(--space-5);
}

.entry-text-edit {
  width: 100%;
  min-height: 200px;
  padding: var(--space-3);
  font-family: inherit;
  font-size: 1rem;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  resize: vertical;
  white-space: pre-wrap;
}

.entry-text-edit:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(31, 122, 234, 0.25);
  border-color: var(--color-primary);
}

.edit-actions {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  margin-top: var(--space-2);
}

.entry-panel {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-card);
  background: var(--color-surface);
  padding: var(--space-4);
  box-shadow: 0 2px 6px rgba(15, 23, 42, 0.06);
}

.entry-panel__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
  margin-bottom: var(--space-3);
}

.entry-panel__title {
  margin: 0;
  font-size: 1rem;
  font-weight: var(--weight-semibold);
}

/* ==========================================================================
   Media Grid (for displaying uploaded photos/videos)
   Base: .media-grid
   BEM Elements: .media-item, .media-link, .media-video, .media-status
   ========================================================================== */
.media-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: var(--space-3);
  margin-bottom: var(--space-3);
}

.media-item {
  position: relative;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  overflow: hidden;
}

.media-link {
  display: block;
  cursor: pointer;
  transition: opacity 0.2s ease;
}

.media-link:hover {
  opacity: 0.9;
}

.media-item img {
  width: 100%;
  height: auto;
  display: block;
}

.media-video {
  width: 100%;
  height: auto;
  max-height: 400px;
  display: block;
  object-fit: contain;
  background: #000;
}

.media-status {
  padding: var(--space-3);
  color: var(--color-text-muted);
}

.media-status.error {
  color: var(--color-danger);
}

.btn-delete-media {
  position: absolute;
  top: var(--space-2);
  right: var(--space-2);
  width: 2rem;
  height: 2rem;
  background: rgba(239, 68, 68, 0.9);
  color: white;
  border: none;
  border-radius: 50%;
  font-size: 1.5rem;
  line-height: 1;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.btn-delete-media:hover {
  background: var(--color-danger);
}

.media-upload {
  margin-top: var(--space-3);
}

/* ==========================================================================
   Registration Form Components
   ========================================================================== */
.input-with-button {
  display: flex;
  gap: var(--space-2);
}

.input-with-button input {
  flex: 1;
}

.profile-section {
  margin-top: var(--space-4);
  padding-top: var(--space-4);
  border-top: 1px solid var(--color-border);
}

.registering-as {
  font-weight: var(--weight-medium);
  margin-bottom: var(--space-4);
}

.optional {
  font-weight: var(--weight-regular);
  color: var(--color-text-muted);
}

.checkbox-label {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  font-weight: var(--weight-regular);
  margin-top: var(--space-2);
}

#username-status {
  display: block;
  margin-top: var(--space-1);
}

#username-status.available {
  color: var(--color-accent);
}

#username-status.unavailable {
  color: var(--color-danger);
}

/* ==========================================================================
   Dark Mode
   ========================================================================== */
@media (prefers-color-scheme: dark) {
  :root {
    --color-surface: #232b36;
    --color-surface-muted: #141924;
    --color-border: #3b4253;
    --color-text: #e6e8ec;
    --color-text-muted: #a0a7b6;
    --color-secondary: #1b2738;
    --color-card: #1d2733;
    --shadow-card: 0 8px 20px rgba(0, 0, 0, 0.6);
  }

  body {
    background: var(--color-surface-muted);
    color: var(--color-text);
  }

  header h1,
  header a {
    color: var(--color-text);
  }

  .card,
  .list > li {
    background: var(--color-surface);
  }

  input,
  textarea,
  select {
    background: var(--color-surface);
    color: var(--color-text);
    border-color: var(--color-border);
  }

  .btn-primary {
    background: var(--color-primary);
  }
}

/* ==========================================================================
   Responsive Breakpoints
   - Tablet: 768px
   - Desktop: 960px
   ========================================================================== */
@media (min-width: 769px) {
  .flip-card__summary {
    -webkit-line-clamp: 2;
    line-clamp: 2;
  }
}

@media (min-width: 960px) {
  .flip-card__summary {
    -webkit-line-clamp: 3;
    line-clamp: 3;
  }
}

@media (max-width: 768px) {
  header {
    text-align: center;
  }

  header nav {
    flex-wrap: wrap;
    justify-content: center;
  }

  main {
    padding: var(--space-4) var(--space-3);
  }

  .section-header {
    flex-direction: column;
    align-items: flex-start;
  }

  .section-header__actions {
    margin-left: 0;
    margin-top: var(--space-3);
  }

  .page-header {
    flex-direction: column;
    align-items: flex-start;
  }

  .page-header__right {
    margin-left: 0;
    margin-top: var(--space-3);
  }

  .breadcrumb {
    white-space: normal;
  }

  .page-header__left {
    flex-wrap: wrap;
  }
}
